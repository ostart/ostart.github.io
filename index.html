<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Artemio&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Artemio&#39;s Blog">
<meta property="og:url" content="https://ostart.github.io/index.html">
<meta property="og:site_name" content="Artemio&#39;s Blog">
<meta property="og:locale" content="ru_RU">
<meta property="article:author" content="Artem Ostashchenko">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Artemio's Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Artemio&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Hi, I&#39;m Artem Ostashchenko, a software developer. I write this blog in Russian</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" target="_blank" rel="noopener" href="https://github.com/ostart/Skills">My Skills</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS-каналы"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Поиск"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Поиск"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://ostart.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-react-ts-eslint-prettier-husky" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/04/22/react-ts-eslint-prettier-husky/" class="article-date">
  <time class="dt-published" datetime="2022-04-22T16:59:24.000Z" itemprop="datePublished">22-04-2022</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/04/22/react-ts-eslint-prettier-husky/">Настройка в React/TypeScript приложении ESLint, Prettier и Husky</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Попросили меня друзья помочь с настройкой <code>CreateReactApp</code> (<em>CRA</em>) приложения, чтобы синтаксис проверялся, красота кода в одном стиле автоматически наводилась, и чтобы не давало закоммитить, если всё вышесказанное не выполняется.</p>
<p>Начал я с настройки <em>ESLint</em>. Он нужен для проверки синтаксиса, стиля кодирования и поиска ошибок в коде. По умолчанию <em>ESLint</em> уже есть в <em>CRA</em>, его нужно только инициализировать через консоль в папке проекта:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn eslint --init</span><br></pre></td></tr></table></figure>

<p>И затем настроить. Установите через консоль следующие плагины в папку проекта:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add -D @typescript-eslint/eslint-plugin @typescript-eslint/parser eslint-config-airbnb-typescript eslint-plugin-jest eslint-config-airbnb</span><br></pre></td></tr></table></figure>

<p>Заполните файл .eslintrc.json следующими настройками:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;env&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;browser&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">&quot;es2022&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">&quot;jest&quot;</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;extends&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;airbnb-typescript&quot;</span>,</span><br><span class="line">        <span class="string">&quot;airbnb/hooks&quot;</span>,</span><br><span class="line">        <span class="string">&quot;eslint:recommended&quot;</span>,</span><br><span class="line">        <span class="string">&quot;plugin:react/recommended&quot;</span>,</span><br><span class="line">        <span class="string">&quot;plugin:react/jsx-runtime&quot;</span>,</span><br><span class="line">        <span class="string">&quot;plugin:@typescript-eslint/recommended&quot;</span>,</span><br><span class="line">        <span class="string">&quot;plugin:jest/recommended&quot;</span>,</span><br><span class="line">        <span class="string">&quot;plugin:prettier/recommended&quot;</span>,</span><br><span class="line">        <span class="string">&quot;plugin:import/recommended&quot;</span>,</span><br><span class="line">        <span class="string">&quot;prettier&quot;</span>      </span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;parser&quot;</span>: <span class="string">&quot;@typescript-eslint/parser&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;parserOptions&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;ecmaFeatures&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;jsx&quot;</span>: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;ecmaVersion&quot;</span>: <span class="string">&quot;latest&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;sourceType&quot;</span>: <span class="string">&quot;module&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;project&quot;</span>: <span class="string">&quot;./tsconfig.json&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;plugins&quot;</span>: [ <span class="string">&quot;react&quot;</span>, <span class="string">&quot;@typescript-eslint&quot;</span>, <span class="string">&quot;jest&quot;</span> ],</span><br><span class="line">    <span class="attr">&quot;rules&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;no-alert&quot;</span>: <span class="string">&quot;warn&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;no-console&quot;</span>: <span class="string">&quot;warn&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;linebreak-style&quot;</span>: <span class="string">&quot;off&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;prettier/prettier&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;error&quot;</span>,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;endOfLine&quot;</span>: <span class="string">&quot;auto&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123; <span class="attr">&quot;usePrettierrc&quot;</span>: <span class="literal">true</span> &#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">&quot;react/prop-types&quot;</span>: <span class="string">&quot;off&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;@typescript-eslint/no-unused-vars&quot;</span>: [<span class="string">&quot;warn&quot;</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;settings&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;react&quot;</span>: &#123;</span><br><span class="line">          <span class="attr">&quot;createClass&quot;</span>: <span class="string">&quot;createReactClass&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;pragma&quot;</span>: <span class="string">&quot;React&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;fragment&quot;</span>: <span class="string">&quot;Fragment&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;detect&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;flowVersion&quot;</span>: <span class="string">&quot;0.53&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;propWrapperFunctions&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;forbidExtraProps&quot;</span>,</span><br><span class="line">            &#123;<span class="attr">&quot;property&quot;</span>: <span class="string">&quot;freeze&quot;</span>, <span class="attr">&quot;object&quot;</span>: <span class="string">&quot;Object&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">&quot;property&quot;</span>: <span class="string">&quot;myFavoriteWrapper&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">&quot;property&quot;</span>: <span class="string">&quot;forbidExtraProps&quot;</span>, <span class="attr">&quot;exact&quot;</span>: <span class="literal">true</span>&#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">&quot;componentWrapperFunctions&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;observer&quot;</span>,</span><br><span class="line">            &#123;<span class="attr">&quot;property&quot;</span>: <span class="string">&quot;styled&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">&quot;property&quot;</span>: <span class="string">&quot;observer&quot;</span>, <span class="attr">&quot;object&quot;</span>: <span class="string">&quot;Mobx&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">&quot;property&quot;</span>: <span class="string">&quot;observer&quot;</span>, <span class="attr">&quot;object&quot;</span>: <span class="string">&quot;&lt;pragma&gt;&quot;</span>&#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">&quot;formComponents&quot;</span>: [</span><br><span class="line">          <span class="string">&quot;CustomForm&quot;</span>,</span><br><span class="line">          &#123;<span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Form&quot;</span>, <span class="attr">&quot;formAttribute&quot;</span>: <span class="string">&quot;endpoint&quot;</span>&#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">&quot;linkComponents&quot;</span>: [</span><br><span class="line">          <span class="string">&quot;Hyperlink&quot;</span>,</span><br><span class="line">          &#123;<span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Link&quot;</span>, <span class="attr">&quot;linkAttribute&quot;</span>: <span class="string">&quot;to&quot;</span>&#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Из конфига <em>ESLint</em> видно, что мы используем <em>AirBnb</em>, а также настраиваем сразу и <em>Prettier</em>. <em>Prettier</em> - это инструмент автоматического форматирования кода. Для его установки запустите в консоли:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add -D prettier eslint-config-prettier eslint-plugin-prettier</span><br></pre></td></tr></table></figure>

<p>Cоветую создать файл <code>.eslintignore</code> и поместить туда следующее содержимое:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">build/*</span><br><span class="line">public/*</span><br><span class="line">docs/*</span><br><span class="line">templates/*</span><br><span class="line">src/react-app-env.d.ts</span><br><span class="line">src/serviceWorker.ts</span><br></pre></td></tr></table></figure>

<p>Создайте файл <code>.prettierrc</code> и поместите туда следующее содержимое:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;trailingComma&quot;</span>: <span class="string">&quot;es5&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;printWidth&quot;</span>: <span class="number">100</span>,</span><br><span class="line">    <span class="attr">&quot;semi&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">&quot;singleQuote&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;tabWidth&quot;</span>: <span class="number">2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Осталось только поправить <code>package.json</code>, внеся туда следующие секции:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    .... <span class="comment">// предыдущий полезный код скриптов</span></span><br><span class="line">    <span class="attr">&quot;format&quot;</span>: <span class="string">&quot;prettier --write src/**/*.&#123;ts,tsx,scss,css,json&#125;&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;lint&quot;</span>: <span class="string">&quot;tsc --noEmit &amp;&amp; eslint src/**/*.ts&#123;,x&#125; --color&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;lint-staged&quot;</span>: <span class="string">&quot;lint-staged&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;prepare&quot;</span>: <span class="string">&quot;husky install&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="string">&quot;eslintConfig&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;extends&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;react-app&quot;</span>,</span><br><span class="line">        <span class="string">&quot;react-app/jest&quot;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>Теперь можно проверить что всё впорядке, запустив в консоли следующие команды:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn lint</span><br><span class="line">yarn format</span><br></pre></td></tr></table></figure>

<p>Если вы настроили всё правильно команды отработают без ошибок.</p>
<p>Добавим теперь заключительную вещь: чтобы при попытке коммита в <code>git</code> запускались наши вышеуказанные скрипты, и можно было закоммитить только код, который эти скрипты успешно проходит.</p>
<p>Для этого установим <em>Husky</em>, который будет реагировать на событие попытки коммита, следующей командой из консоли:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add -D lint-staged husky</span><br></pre></td></tr></table></figure>

<p>Для инициализации <em>Husky</em> выполните в консоли команду:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn husky install</span><br></pre></td></tr></table></figure>

<p>Так как у нас версия <em>Husky</em> 7, то в соответствующей скрытой папке <code>.husky</code> необходимо внести следующие изменения в файл <code>pre-commit</code>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">. <span class="string">&quot;<span class="subst">$(dirname <span class="string">&quot;<span class="variable">$0</span>&quot;</span>)</span>/_/husky.sh&quot;</span></span><br><span class="line"></span><br><span class="line">yarn lint</span><br><span class="line">yarn format</span><br></pre></td></tr></table></figure>

<p>Теперь вам удастся закоммитить ваш код только в случае успешного выполнения скриптов из файла <code>pre-commit</code>.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ostart.github.io/2022/04/22/react-ts-eslint-prettier-husky/" data-id="cl2aqvtw0001flcvsabcaham7" data-title="Настройка в React/TypeScript приложении ESLint, Prettier и Husky" class="article-share-link">Поделиться</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CreateReactApp/" rel="tag">CreateReactApp</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ESLint/" rel="tag">ESLint</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Husky/" rel="tag">Husky</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Prettier/" rel="tag">Prettier</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/" rel="tag">React</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-syslog-uncontrolled-growth" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/04/22/syslog-uncontrolled-growth/" class="article-date">
  <time class="dt-published" datetime="2022-04-22T16:24:00.000Z" itemprop="datePublished">22-04-2022</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/04/22/syslog-uncontrolled-growth/">Неконтролируемый рост системных файлов Linux</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Интересную особенность работы ASP.NET Core приложения в Linux мне удалось недавно зафиксировать. Было установлено, что со временем системынй файлы Linux (а именно: syslog и daemon.log) вырастают до угрожающих размеров. Оказалось, что весь консольный вывод ASP.NET Core приложений попадал туда. А консольный вывод включал помимо <code>AddConsole()</code> ещё и консоль Serilog <code>Write().ConsoleColored()</code>. Выставление корректных настроек секции Logging конфигурационных файлов appsetting.json позволил установить их уровень высоким и существенно уменьшить размеры системных файлов Linux.</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;Logging&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;Console&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;LogLevel&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;*&quot;</span>: <span class="string">&quot;Error&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Оказывается, что системная служба <code>journald</code> ведёт логирование вывода на консоль в свои бинарные логи, а кроме того вносит записи о выводе на консоль в системные журналы Linux (syslog и daemon.log). Поэтому будьте внимательны при выставлении уровня логирования ваших приложений, особенно на продакшене.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ostart.github.io/2022/04/22/syslog-uncontrolled-growth/" data-id="cl2aqvtwi0024lcvs8lkd6zy5" data-title="Неконтролируемый рост системных файлов Linux" class="article-share-link">Поделиться</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C#</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/aspnetcore/" rel="tag">aspnetcore</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/syslog/" rel="tag">syslog</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-switch-by-tuples" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/04/22/switch-by-tuples/" class="article-date">
  <time class="dt-published" datetime="2022-04-22T15:57:13.000Z" itemprop="datePublished">22-04-2022</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/04/22/switch-by-tuples/">Сопоставление с образцом на основе кортежей</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Ранее мною уже был рассмотрен один из механизмов сопоставления с образцом (паттерн матчинга) в статье <a href="https://ostart.github.io/2022/03/17/switch-by-property-values/">Сопоставление с образцом на основе значений свойств объекта</a>. В данной статье рассмотрим сопоставление с образцом на основе кортежей, что делает код намного короче.</p>
<p>Рассмотрим класс комнаты и перечисление статуса члена клуба такого вида:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Room</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Number &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Type &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Size &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Deconstruct</span>(<span class="params"><span class="keyword">out</span> <span class="built_in">string</span> type, <span class="keyword">out</span> <span class="built_in">string</span> size</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        type = type;</span><br><span class="line">        size = Size;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="built_in">enum</span> Membership</span><br><span class="line">&#123;</span><br><span class="line">    Bronze,</span><br><span class="line">    Silver,</span><br><span class="line">    Gold</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Метод <code>GetRooms</code> возвращает список комнат вида:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;Room&gt; <span class="title">GetRooms</span>(<span class="params"></span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> List&lt;Room&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">new</span> Room</span><br><span class="line">        &#123;</span><br><span class="line">            Number = <span class="number">3</span>,</span><br><span class="line">            Size = <span class="string">&quot;Large&quot;</span>,</span><br><span class="line">            Type = <span class="string">&quot;Deluxe&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="keyword">new</span> Room</span><br><span class="line">        &#123;</span><br><span class="line">            Number = <span class="number">2</span>,</span><br><span class="line">            Size = <span class="string">&quot;Large&quot;</span>,</span><br><span class="line">            Type = <span class="string">&quot;Regular&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="keyword">new</span> Room</span><br><span class="line">        &#123;</span><br><span class="line">            Number = <span class="number">1</span>,</span><br><span class="line">            Size = <span class="string">&quot;Standard&quot;</span>,</span><br><span class="line">            Type = <span class="string">&quot;Regular&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Начиная с C# 8.0 появилась возможность сопоставлять с образцом в выражении <code>switch</code>, используя деконструктор класса (см. ранее конструкцию <code>Deconstruct</code> в определении класса <code>Room</code>):</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="built_in">int</span> RoomNotAvailable = <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">AssignRoom</span>(<span class="params">Membership membership</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">foreach</span>(<span class="function"><span class="keyword">var</span> room <span class="keyword">in</span> <span class="title">GetRooms</span>(<span class="params"></span>))</span></span><br><span class="line">    &#123;</span><br><span class="line">        Membership clientCategory = room <span class="keyword">switch</span></span><br><span class="line">        &#123;</span><br><span class="line">            (<span class="string">&quot;Deluxe&quot;</span>, <span class="string">&quot;Large&quot;</span>) =&gt; Membership.Gold,</span><br><span class="line">            (<span class="string">&quot;Regular&quot;</span>, <span class="string">&quot;Large&quot;</span>) =&gt; Membership.Silver,</span><br><span class="line">            (<span class="string">&quot;Regular&quot;</span>, <span class="string">&quot;Standard&quot;</span>) =&gt; Membership.Bronze,</span><br><span class="line">            _ =&gt; Membership.Bronze</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (clientCategory == membership)</span><br><span class="line">            <span class="keyword">return</span> room.Number;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> RoomNotAvailable;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Код ветки <code>_ =&gt; Membership.Bronze</code> аналогичен случаю <code>default:</code> в стандартном <code>switch</code>.</p>
<p>Тогда основной метод программы может использовать вышеприведённый код таким образом:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> voir <span class="title">Main</span>(<span class="params"></span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    Console.Write(<span class="string">&quot;Choose status: 0 for Bronze, 1 for Silver, 2 for Gold&quot;</span>);</span><br><span class="line">    <span class="built_in">string</span> clientStatus = Console.ReadLine();</span><br><span class="line"></span><br><span class="line">    Enum.TryParse(clientStatus, <span class="keyword">out</span> Membership membership);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">int</span> roomNumber = AssignRoom(membership);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (roomNumber == RoomNotAvailable)</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Room not available&quot;</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;Room number is <span class="subst">&#123;roomNumber&#125;</span>&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Видно на сколько короче стала конструкция <code>switch</code> благодаря использованию кортежей. Компактный синтаксис кортежей делает их идеальным инструментом для сопоставления с образцом (паттерн матчинга). В остальном код и результаты идентичны приведённому в статье <a href="https://ostart.github.io/2022/03/17/switch-by-property-values/">Сопоставление с образцом на основе значений свойств объекта</a>.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ostart.github.io/2022/04/22/switch-by-tuples/" data-id="cl2aqvtwh0021lcvs0nntdbvu" data-title="Сопоставление с образцом на основе кортежей" class="article-share-link">Поделиться</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C#</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/switch/" rel="tag">switch</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-to-dictionary-vs-to-lookup" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/04/15/to-dictionary-vs-to-lookup/" class="article-date">
  <time class="dt-published" datetime="2022-04-15T07:52:53.000Z" itemprop="datePublished">15-04-2022</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/04/15/to-dictionary-vs-to-lookup/">ToDictionary vs ToLookup</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Встречается необходимость, сгруппировав элементы, преобразовать их в структуру данных для поиска группы по ключу группировки. Это можно сделать, например, так:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>[] names = &#123;<span class="string">&quot;Pavel&quot;</span>, <span class="string">&quot;Peter&quot;</span>, <span class="string">&quot;Andrew&quot;</span>, <span class="string">&quot;Anna&quot;</span>, <span class="string">&quot;Alice&quot;</span>, <span class="string">&quot;John&quot;</span>&#125;;</span><br><span class="line"><span class="keyword">var</span> namesByLetter = <span class="keyword">new</span> Dictionary&lt;<span class="built_in">char</span>, List&lt;<span class="built_in">string</span>&gt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> <span class="keyword">group</span> <span class="keyword">in</span> names.GroupBy(name =&gt; name[<span class="number">0</span>]))</span><br><span class="line">	namesByLetter.Add(<span class="keyword">group</span>.Key, <span class="keyword">group</span>.ToList());</span><br><span class="line"></span><br><span class="line">Assert.That(namesByLetter[<span class="string">&#x27;J&#x27;</span>], Is.EquivalentTo(<span class="keyword">new</span>[] &#123; <span class="string">&quot;John&quot;</span> &#125;));</span><br><span class="line">Assert.That(namesByLetter[<span class="string">&#x27;P&#x27;</span>], Is.EquivalentTo(<span class="keyword">new</span>[] &#123;<span class="string">&quot;Pavel&quot;</span>, <span class="string">&quot;Peter&quot;</span>&#125;));</span><br><span class="line">Assert.IsFalse(namesByLetter.ContainsKey(<span class="string">&#x27;Z&#x27;</span>));</span><br></pre></td></tr></table></figure>

<p>Ровно того же эффекта можно добиться и без цикла при помощи LINQ-метода <code>ToDictionary</code>, имеющего следующую сигнатуру:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">IDictionary&lt;K, V&gt; <span class="title">ToDictionary</span>(<span class="params"><span class="keyword">this</span> IEnumerable&lt;T&gt; items, Func&lt;T, K&gt; keySelector, Func&lt;T, V&gt; valueSelector</span>)</span></span><br></pre></td></tr></table></figure>

<p>Тогда предыдущий пример с <code>foreach</code> в случае <code>ToDictionary</code> примет следующий вид:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>[] names = &#123;<span class="string">&quot;Pavel&quot;</span>, <span class="string">&quot;Peter&quot;</span>, <span class="string">&quot;Andrew&quot;</span>, <span class="string">&quot;Anna&quot;</span>, <span class="string">&quot;Alice&quot;</span>, <span class="string">&quot;John&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">Dictionary&lt;<span class="built_in">char</span>, List&lt;<span class="built_in">string</span>&gt;&gt; namesByLetter = names</span><br><span class="line">	.GroupBy(name =&gt; name[<span class="number">0</span>])</span><br><span class="line">	.ToDictionary(<span class="keyword">group</span> =&gt; <span class="keyword">group</span>.Key, <span class="keyword">group</span> =&gt; <span class="keyword">group</span>.ToList());</span><br><span class="line"></span><br><span class="line">Assert.That(namesByLetter[<span class="string">&#x27;J&#x27;</span>], Is.EquivalentTo(<span class="keyword">new</span>[] &#123; <span class="string">&quot;John&quot;</span> &#125;));</span><br><span class="line">Assert.That(namesByLetter[<span class="string">&#x27;P&#x27;</span>], Is.EquivalentTo(<span class="keyword">new</span>[] &#123;<span class="string">&quot;Pavel&quot;</span>, <span class="string">&quot;Peter&quot;</span>&#125;));</span><br><span class="line">Assert.IsFalse(namesByLetter.ContainsKey(<span class="string">&#x27;Z&#x27;</span>));</span><br></pre></td></tr></table></figure>

<p>Ещё проще воспользоваться LINQ-методом <code>ToLookup</code>, имеющим следующие сигнатуры:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">ILookup&lt;K, T&gt; <span class="title">ToLookup</span>(<span class="params"><span class="keyword">this</span> IEnumerable&lt;T&gt; items, Func&lt;T, K&gt; keySelector</span>)</span></span><br></pre></td></tr></table></figure>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">ILookup&lt;K, V&gt; <span class="title">ToLookup</span>(<span class="params"><span class="keyword">this</span> IEnumerable&lt;T&gt; items, Func&lt;T, K&gt; keySelector, Func&lt;T, V&gt; valueSelector</span>)</span></span><br></pre></td></tr></table></figure>

<p>В отличие от словаря, <code>Lookup</code> является неизменяемым (immutable) типом. У него нет методов типа <code>Add</code> и открытого конструктора. Интересно, что <code>Lookup</code> по неизвестному ключу возвращает пустую коллекцию, а Dictionary в такой ситуации выбрасывает исключение. Также в <code>Lookup</code> можно использовать ключи типа <code>null</code>.<br>Замечу, что операции <code>list.ToLookup(x =&gt; x)</code> и <code>list.GroupBy(x =&gt; x).ToDictionary(group =&gt; group.Key)</code> семантически эквивалентны.</p>
<p>Пример с <code>foreach</code> и <code>ToDictionary</code> в случае <code>ToLookup</code> примет следующий вид:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>[] names = &#123;<span class="string">&quot;Pavel&quot;</span>, <span class="string">&quot;Peter&quot;</span>, <span class="string">&quot;Andrew&quot;</span>, <span class="string">&quot;Anna&quot;</span>, <span class="string">&quot;Alice&quot;</span>, <span class="string">&quot;John&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">ILookup&lt;<span class="built_in">char</span>, <span class="built_in">string</span>&gt; namesByLetter = names.ToLookup(name =&gt; name[<span class="number">0</span>], name =&gt; name.ToLower());</span><br><span class="line"></span><br><span class="line">Assert.That(namesByLetter[<span class="string">&#x27;J&#x27;</span>], Is.EquivalentTo(<span class="keyword">new</span>[] &#123;<span class="string">&quot;john&quot;</span>&#125;));</span><br><span class="line">Assert.That(namesByLetter[<span class="string">&#x27;P&#x27;</span>], Is.EquivalentTo(<span class="keyword">new</span>[] &#123;<span class="string">&quot;pavel&quot;</span>, <span class="string">&quot;peter&quot;</span>&#125;));</span><br><span class="line">			</span><br><span class="line"><span class="comment">// Lookup по неизвестному ключу возвращает пустую коллекцию. </span></span><br><span class="line"><span class="comment">// Это бывает удобнее, чем поведение Dictionary, который в такой ситуации бросает исключение.</span></span><br><span class="line">Assert.That(namesByLetter[<span class="string">&#x27;Z&#x27;</span>], Is.Empty);</span><br></pre></td></tr></table></figure>

<p>В русскоязычной литературе <code>Lookup</code> раньше именовался таблицей истинности. <code>Lookup</code> можно использовать в построении обратного индекса. Обратный индекс — это структура данных, часто использующаяся в задачах полнотекстового поиска нужного документа в большой базе документов. По своей сути обратный индекс напоминает индекс в конце бумажных энциклопедий, где для каждого ключевого слова указан список страниц, где оно встречается.</p>
<p>Допустим наш документ определён так:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Document</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">int</span> Id;</span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">string</span> Text;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Тогда для списка документов обратный индекс можно получить так:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ILookup&lt;<span class="built_in">string</span>, <span class="built_in">int</span>&gt; <span class="title">BuildInvertedIndex</span>(<span class="params">Document[] documents</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> documents</span><br><span class="line">        .SelectMany(x =&gt; Regex.Split(x.Text, <span class="string">@&quot;\W+&quot;</span>)</span><br><span class="line">		    .Where(x =&gt; x.Length &gt; <span class="number">0</span>)</span><br><span class="line">		        .Select(y =&gt; Tuple.Create(y.ToLower(), x.Id)))</span><br><span class="line">		            .Distinct()</span><br><span class="line">        .ToLookup(x =&gt; x.Item1, x =&gt; x.Item2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ostart.github.io/2022/04/15/to-dictionary-vs-to-lookup/" data-id="cl2aqvtwm002alcvsa0jueo0t" data-title="ToDictionary vs ToLookup" class="article-share-link">Поделиться</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C#</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/LINQ/" rel="tag">LINQ</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ToDictionary/" rel="tag">ToDictionary</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ToLookup/" rel="tag">ToLookup</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-sorting-tuples" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/03/31/sorting-tuples/" class="article-date">
  <time class="dt-published" datetime="2022-03-31T10:45:30.000Z" itemprop="datePublished">31-03-2022</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/03/31/sorting-tuples/">Сортировка кортежей</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Создание кортежа с помощью конструктора выглядит громоздко. Чтобы облегчить синтаксис создания кортежей существует класс <code>Tuple</code> с серией статических методов, создающих кортежи:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> t1 = Tuple.Create(<span class="number">42</span>, <span class="string">&quot;abc&quot;</span>);</span><br><span class="line"><span class="comment">// Эквивалентно:</span></span><br><span class="line"><span class="comment">// var t1 = new Tuple&lt;int, string&gt;(42, &quot;abc&quot;);</span></span><br></pre></td></tr></table></figure>

<p>Полезное свойство кортежей состоит в том, что они реализуют интерфейс <code>IComparable</code>, сравнивающий кортежи по компонентам. То есть Tuple.Create(1, 2) будет меньше Tuple.Create(2, 1). Этот интерфейс по умолчанию используется в методах сортировки и поиска минимума/максимума.</p>
<p>Использование данного факта рассмотрим на примере:</p>
<p>Дан текст. Нужно составить список всех встречающихся в тексте слов, упорядоченный сначала по возрастанию длины слова, а потом лексикографически. Удивительно, но данную задачу можно решить совсем не используя <code>ThenBy</code>.</p>
<p>Наивное решение заключается в том, чтобы сформировать нужные кортежи, отсортировать их, а затем извлечь вторые компоненты кортежей, содержащих решение:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;<span class="built_in">string</span>&gt;  <span class="title">GetSortedWords</span>(<span class="params"><span class="built_in">string</span> text</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> Regex.Split(text, <span class="string">@&quot;\W+&quot;</span>)</span><br><span class="line">                .Where(x =&gt; x.Length &gt; <span class="number">0</span>)</span><br><span class="line">                .Select(t =&gt; Tuple.Create(t.Length, t.ToLowerInvariant()))</span><br><span class="line">                .OrderBy(x =&gt; x)</span><br><span class="line">                .Select(x =&gt; x.Item2)</span><br><span class="line">                .Distinct()</span><br><span class="line">                .ToList();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Однако следует напомнить, что keySelector функции OrderBy — это функция, которая каждому элементу последовательности ставит в соответствие некоторый ключ, по которому его будут сравнивать при сортировке. Поэтому решение можно записать намного короче, поместив кортеж (типа ValueTuple) в keySelector функции OrderBy:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;<span class="built_in">string</span>&gt;  <span class="title">GetSortedWords</span>(<span class="params"><span class="built_in">string</span> text</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> Regex.Split(text.ToLower(), <span class="string">@&quot;\W+&quot;</span>)</span><br><span class="line">                .Where(x =&gt; !<span class="built_in">string</span>.IsNullOrEmpty(x))</span><br><span class="line">                .OrderBy(x =&gt; (x.Length, x))</span><br><span class="line">                .Distinct()</span><br><span class="line">                .ToList();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Вывод программы можно увидеть ниже:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GetSortedWords(&quot;A box of biscuits, a box of mixed biscuits, and a biscuit mixer.&quot;)</span><br><span class="line">&#x27;a&#x27; &#x27;of&#x27; &#x27;and&#x27; &#x27;box&#x27; &#x27;mixed&#x27; &#x27;mixer&#x27; &#x27;biscuit&#x27; &#x27;biscuits&#x27;</span><br><span class="line"></span><br><span class="line">GetSortedWords(&quot;Each Easter Eddie eats eighty Easter eggs.&quot;)</span><br><span class="line">&#x27;each&#x27; &#x27;eats&#x27; &#x27;eggs&#x27; &#x27;eddie&#x27; &#x27;easter&#x27; &#x27;eighty&#x27;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://ostart.github.io/2022/03/31/sorting-tuples/" data-id="cl2aqvtwg001zlcvs9ota1qwv" data-title="Сортировка кортежей" class="article-share-link">Поделиться</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C#</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-order-by" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/03/31/order-by/" class="article-date">
  <time class="dt-published" datetime="2022-03-31T09:49:02.000Z" itemprop="datePublished">31-03-2022</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/03/31/order-by/">LINQ оператор OrderBy</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Для сортировки последовательности в LINQ имеется четыре метода:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">IOrderedEnumerable</span>&lt;<span class="title">T</span>&gt; <span class="title">OrderBy</span>&lt;<span class="title">T</span>&gt;(<span class="params"><span class="keyword">this</span> IEnumerable&lt;T&gt; items, Func&lt;T, K&gt; keySelector</span>)</span>;</span><br><span class="line"><span class="function"><span class="title">IOrderedEnumerable</span>&lt;<span class="title">T</span>&gt; <span class="title">OrderByDescending</span>&lt;<span class="title">T</span>&gt;(<span class="params"><span class="keyword">this</span> IEnumerable&lt;T&gt; items, Func&lt;T, K&gt; keySelector</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">IOrderedEnumerable</span>&lt;<span class="title">T</span>&gt; <span class="title">ThenBy</span>&lt;<span class="title">T</span>&gt;(<span class="params"><span class="keyword">this</span> IOrderedEnumerable&lt;T&gt; items, Func&lt;T, K&gt; keySelector</span>)</span>;</span><br><span class="line"><span class="function"><span class="title">IOrderedEnumerable</span>&lt;<span class="title">T</span>&gt; <span class="title">ThenByDescending</span>&lt;<span class="title">T</span>&gt;(<span class="params"><span class="keyword">this</span> IOrderedEnumerable&lt;T&gt; items, Func&lt;T, K&gt; keySelector</span>)</span>;</span><br></pre></td></tr></table></figure>

<p>Первые два дают на выходе последовательность, упорядоченную по возрастанию/убыванию ключей. А keySelector — это как раз функция, которая каждому элементу последовательности ставит в соответствие некоторый ключ, по которому его будут сравнивать при сортировке.</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> names = <span class="keyword">new</span>[] &#123; <span class="string">&quot;Pavel&quot;</span>, <span class="string">&quot;Alexander&quot;</span>, <span class="string">&quot;Anna&quot;</span> &#125;;</span><br><span class="line">IOrderedEnumerable&lt;<span class="built_in">string</span>&gt; sorted = names.OrderBy(n =&gt; n.Length);</span><br><span class="line">Assert.That(sorted, Is.EqualTo(<span class="keyword">new</span>[] &#123; <span class="string">&quot;Anna&quot;</span>, <span class="string">&quot;Pavel&quot;</span>, <span class="string">&quot;Alexander&quot;</span> &#125;));</span><br></pre></td></tr></table></figure>

<p>Если при равенстве ключей вы хотите отсортировать элементы по другому критерию, то на помощь приходит метод ThenBy.</p>
<p>Например, в следующем примере все имена сортируются по убыванию длин, а при равных длинах — лексикографически.</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> names = <span class="keyword">new</span>[] &#123; <span class="string">&quot;Pavel&quot;</span>, <span class="string">&quot;Alexander&quot;</span>, <span class="string">&quot;Irina&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> sorted = names</span><br><span class="line">    .OrderByDescending(name =&gt; name.Length)</span><br><span class="line">    .ThenBy(n =&gt; n);</span><br><span class="line"></span><br><span class="line">Assert.That(sorted, Is.EqualTo(<span class="keyword">new</span>[] &#123; <span class="string">&quot;Alexander&quot;</span>, <span class="string">&quot;Irina&quot;</span>, <span class="string">&quot;Pavel&quot;</span> &#125;).AsCollection);</span><br></pre></td></tr></table></figure>

<p>Чтобы убрать из последовательности все повторяющиеся элементы используют LINQ функцию Distinct:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> numbers = <span class="keyword">new</span>[] &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span>, &#125;;</span><br><span class="line"><span class="keyword">var</span> uniqueNumbers = numbers.Distinct();</span><br><span class="line">Assert.That(uniqueNumbers, Is.EqualTo(<span class="keyword">new</span>[] &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> &#125;).AsCollection));</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ostart.github.io/2022/03/31/order-by/" data-id="cl2aqvtvv0017lcvs5dypfft9" data-title="LINQ оператор OrderBy" class="article-share-link">Поделиться</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C#</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/LINQ/" rel="tag">LINQ</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/OrderBy/" rel="tag">OrderBy</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-select-many" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/03/22/select-many/" class="article-date">
  <time class="dt-published" datetime="2022-03-22T06:14:08.000Z" itemprop="datePublished">22-03-2022</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/03/22/select-many/">LINQ оператор SelectMany</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>В LINQ есть такой необычный оператор, как <code>SelectMany</code>. В чем же его необычность?</p>
<p>Рассмотрим сигнатуру метода:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">IEnumerable&lt;R&gt; <span class="title">SelectMany</span>(<span class="params"><span class="keyword">this</span> IEnumerable&lt;T&gt; items, Func&lt;T, IEnumerable&lt;R&gt;&gt; f</span>)</span></span><br></pre></td></tr></table></figure>

<p>Из сигнатуры метода <code>SelectMany</code> видно, что он применяется к последовательности типа <code>IEnumerable&lt;T&gt;</code>. К каждому элементу этой последовательности применяется функция <code>Func&lt;T, IEnumerable&lt;R&gt;&gt;</code>, которая преобразует элемент типа <code>T</code> в последовательность типа <code>IEnumerable&lt;R&gt;</code>. И на выходе мы имеем последовательность типа <code>IEnumerable&lt;R&gt;</code>. Получается, что каждый элемент превращается в множество, которое может быть закрыто отличным типом от исходного, которое затем спрямляется. Результатом работы <code>SelectMany</code> является конкатенация всех полученных последовательностей, т.е. мы имеем не последовательность последовательностей, а единую последовательность типа, отличного от исходного (не обязательно отличного, можно получить и последовательность того же типа).</p>
<p>Поясним вышесказанное следующим примером:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>[] words = &#123;<span class="string">&quot;ab&quot;</span>, <span class="string">&quot;&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;de&quot;</span>&#125;;</span><br><span class="line">IEnumerable&lt;<span class="built_in">char</span>&gt; letters = words.SelectMany(w =&gt; w.ToCharArray());</span><br><span class="line">Assert.That(letters, Is.EqualTo(<span class="keyword">new</span>[] &#123;<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>&#125;));</span><br></pre></td></tr></table></figure>

<p>Впрочем строка уже сама по себе является последовательностью символов и реализует интерфейс IEnumerable<char>, поэтому вызов ToCharArray на самом деле лишний.</p>
<p>Одно из не совсем очевидных применений <code>SelectMany</code> — это вычисление декартова произведения двух множеств. Декартово произведение множества {-1, 0, 1} на само себя даст все возможные относительные координаты соседей условной точки Point, где Point – класс, имеющий координаты X и Y в качестве открытых полей. Для вычисления декартова произведения двух множеств также потребуется использовать метод <code>Select</code> внутри <code>SelectMany</code>, как показано в примере ниже:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> IEnumerable&lt;Point&gt; <span class="title">GetNeighbours</span>(<span class="params">Point p</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">int</span>[] d = &#123;<span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>&#125;;</span><br><span class="line">    <span class="keyword">return</span> d.SelectMany(i =&gt; d.Select(s =&gt; <span class="keyword">new</span> Point(p.X + i, p.Y + s)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Вот ещё один интересный пример использования <code>SelectMany</code>. Требуется составить лексикографически упорядоченный список всех встречающихся слов в массиве строк. Слова нужно сравнивать регистронезависимо и выводить в нижнем регистре.</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"></span>)</span></span><br><span class="line">&#123;</span><br><span class="line"> <span class="keyword">var</span> vocabulary = GetSortedWords(</span><br><span class="line">  <span class="string">&quot;Hello, hello, hello, how low&quot;</span>,</span><br><span class="line">  <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="string">&quot;With the lights out, it&#x27;s less dangerous&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Here we are now; entertain us&quot;</span>,</span><br><span class="line">  <span class="string">&quot;I feel stupid and contagious&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Here we are now; entertain us&quot;</span>,</span><br><span class="line">  <span class="string">&quot;A mulatto, an albino, a mosquito, my libido...&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Yeah, hey&quot;</span></span><br><span class="line"> );</span><br><span class="line"> <span class="keyword">foreach</span> (<span class="keyword">var</span> word <span class="keyword">in</span> vocabulary)</span><br><span class="line">  Console.WriteLine(word);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">string</span>[] <span class="title">GetSortedWords</span>(<span class="params"><span class="keyword">params</span> <span class="built_in">string</span>[] textLines</span>)</span></span><br><span class="line">&#123;</span><br><span class="line"> <span class="keyword">return</span> textLines</span><br><span class="line">       .SelectMany(x =&gt; Regex.Split(x.ToLower(), <span class="string">@&quot;\W+&quot;</span>))</span><br><span class="line">       .Where(x =&gt; x.Length &gt; <span class="number">0</span>)</span><br><span class="line">       .Distinct()</span><br><span class="line">       .OrderBy(x =&gt; x)</span><br><span class="line">       .ToArray();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Здесь для разбиения строки на слова используется класс <code>Regex</code> из пространства имён <code>System.Text.RegularExpressions</code>. Все полученные слова “спрямляются” (объединяются из разных массивов в один массив), удаляются пустые строки и повторы. В конце массив лексикографически упорядочивается и возвращается.</p>
<p>Без использования <code>SelectMany</code> пришлось бы очень трудно, т.к. каждая входящая строка после разбиения <code>Regex.Split</code> превращается в массив слов и мы бы получили массив массивов.</p>
<p>Вывод программы можно увидеть ниже:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">a</span><br><span class="line">albino</span><br><span class="line">an</span><br><span class="line">and</span><br><span class="line">are</span><br><span class="line">contagious</span><br><span class="line">dangerous</span><br><span class="line">entertain</span><br><span class="line">feel</span><br><span class="line">hello</span><br><span class="line">here</span><br><span class="line">hey</span><br><span class="line">how</span><br><span class="line">i</span><br><span class="line">it</span><br><span class="line">less</span><br><span class="line">libido</span><br><span class="line">lights</span><br><span class="line">low</span><br><span class="line">mosquito</span><br><span class="line">mulatto</span><br><span class="line">my</span><br><span class="line">now</span><br><span class="line">out</span><br><span class="line">s</span><br><span class="line">stupid</span><br><span class="line">the</span><br><span class="line">us</span><br><span class="line">we</span><br><span class="line">with</span><br><span class="line">yeah</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ostart.github.io/2022/03/22/select-many/" data-id="cl2aqvtw4001klcvsec4daaz5" data-title="LINQ оператор SelectMany" class="article-share-link">Поделиться</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C#</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/LINQ/" rel="tag">LINQ</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SelectMany/" rel="tag">SelectMany</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-int-to-guid" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/03/17/int-to-guid/" class="article-date">
  <time class="dt-published" datetime="2022-03-17T09:53:42.000Z" itemprop="datePublished">17-03-2022</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/03/17/int-to-guid/">Как преобразовать int в Guid заданным способом</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Потребовалось давеча в рамках тестирования формировать <code>Guid</code> таким образом, чтобы он генерировался не случайно, а нужным мне управляемым способом. А именно так, чтобы при использовании цикла <code>for</code> по <code>int</code> формировался <code>Guid</code> следующим образом:</p>
<p>для int = 1 получить Guid = ‘00000000-0000-0000-0000-000000000001’<br>для int = 2 получить Guid = ‘00000000-0000-0000-0000-000000000002’<br>для int = 3 получить Guid = ‘00000000-0000-0000-0000-000000000003’</p>
<p>и так далее…</p>
<p>Как этого добиться? Решение данной задачи представлено ниже:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Guid <span class="title">ToGuid</span>(<span class="params"><span class="built_in">int</span> <span class="keyword">value</span></span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> bytes = <span class="keyword">new</span> <span class="built_in">byte</span>[<span class="number">16</span>];</span><br><span class="line">    BitConverter.GetBytes(<span class="keyword">value</span>).CopyTo(bytes, <span class="number">0</span>);</span><br><span class="line">    bytes = bytes.Reverse().ToArray();</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Guid(bytes);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ostart.github.io/2022/03/17/int-to-guid/" data-id="cl2aqvtvo000nlcvs1i1c78hi" data-title="Как преобразовать int в Guid заданным способом" class="article-share-link">Поделиться</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C#</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Guid/" rel="tag">Guid</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-switch-by-property-values" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/03/17/switch-by-property-values/" class="article-date">
  <time class="dt-published" datetime="2022-03-17T07:26:48.000Z" itemprop="datePublished">17-03-2022</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/03/17/switch-by-property-values/">Сопоставление с образцом на основе значений свойств объекта</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Рассмотрим класс комнаты и перечисление статуса члена клуба такого вида:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Room</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Number &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Type &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Size &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="built_in">enum</span> Membership</span><br><span class="line">&#123;</span><br><span class="line">    Bronze,</span><br><span class="line">    Silver,</span><br><span class="line">    Gold</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Метод <code>GetRooms</code> возвращает список комнат вида:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;Room&gt; <span class="title">GetRooms</span>(<span class="params"></span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> List&lt;Room&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">new</span> Room</span><br><span class="line">        &#123;</span><br><span class="line">            Number = <span class="number">3</span>,</span><br><span class="line">            Size = <span class="string">&quot;Large&quot;</span>,</span><br><span class="line">            Type = <span class="string">&quot;Deluxe&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="keyword">new</span> Room</span><br><span class="line">        &#123;</span><br><span class="line">            Number = <span class="number">2</span>,</span><br><span class="line">            Size = <span class="string">&quot;Large&quot;</span>,</span><br><span class="line">            Type = <span class="string">&quot;Regular&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="keyword">new</span> Room</span><br><span class="line">        &#123;</span><br><span class="line">            Number = <span class="number">1</span>,</span><br><span class="line">            Size = <span class="string">&quot;Standard&quot;</span>,</span><br><span class="line">            Type = <span class="string">&quot;Regular&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Начиная с C# 8.0 появилась возможность сопоставлять с образцом в выражении <code>switch</code>, используя несколько значений свойств объекта класса:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="built_in">int</span> RoomNotAvailable = <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">AssignRoom</span>(<span class="params">Membership membership</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">foreach</span>(<span class="function"><span class="keyword">var</span> room <span class="keyword">in</span> <span class="title">GetRooms</span>(<span class="params"></span>))</span></span><br><span class="line">    &#123;</span><br><span class="line">        Membership clientCategory = room <span class="keyword">switch</span></span><br><span class="line">        &#123;</span><br><span class="line">            &#123; Size: <span class="string">&quot;Large&quot;</span>, Type: <span class="string">&quot;Deluxe&quot;</span> &#125; =&gt; Membership.Gold,</span><br><span class="line">            &#123; Size: <span class="string">&quot;Large&quot;</span>, Type: <span class="string">&quot;Regular&quot;</span> &#125; =&gt; Membership.Silver,</span><br><span class="line">            &#123; Size: <span class="string">&quot;Standard&quot;</span>, Type: <span class="string">&quot;Regular&quot;</span> &#125; =&gt; Membership.Bronze,</span><br><span class="line">            _ =&gt; Membership.Bronze</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (clientCategory == membership)</span><br><span class="line">            <span class="keyword">return</span> room.Number;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> RoomNotAvailable;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Код ветки <code>_ =&gt; Membership.Bronze</code> аналогичен случаю <code>default:</code> в стандартном <code>switch</code>.</p>
<p>Тогда основной метод программы может использовать вышеприведённый код таким образом:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> voir <span class="title">Main</span>(<span class="params"></span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    Console.Write(<span class="string">&quot;Choose status: 0 for Bronze, 1 for Silver, 2 for Gold&quot;</span>);</span><br><span class="line">    <span class="built_in">string</span> clientStatus = Console.ReadLine();</span><br><span class="line"></span><br><span class="line">    Enum.TryParse(clientStatus, <span class="keyword">out</span> Membership membership);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">int</span> roomNumber = AssignRoom(membership);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (roomNumber == RoomNotAvailable)</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Room not available&quot;</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;Room number is <span class="subst">&#123;roomNumber&#125;</span>&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Основная магия сопоставления с образцом с использованием значений свойств объектов происходит в методе <code>AssignRoom</code>. Раньше можно было делать <code>switch</code> только на основе единственного значения, но начиная с С# 8.0 паттерн матчинг можно делать на основе значений нескольких свойств экзмепляров классов. Такой подход намного более читабельный и улучшает ясность кода.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ostart.github.io/2022/03/17/switch-by-property-values/" data-id="cl2aqvtwl0027lcvscdubd10y" data-title="Сопоставление с образцом на основе значений свойств объекта" class="article-share-link">Поделиться</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C#</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/switch/" rel="tag">switch</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-datetime-vs-stopwatch" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/02/24/datetime-vs-stopwatch/" class="article-date">
  <time class="dt-published" datetime="2022-02-24T08:05:33.000Z" itemprop="datePublished">24-02-2022</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/02/24/datetime-vs-stopwatch/">DateTime.Now vs. Stopwatch</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Читая книгу Андрея Акиньшина “Профессиональный бенчмарк” решил проверять приводимые в книге примеры на практике (автор сам так рекомендует). Начал, конечно же, со столь любимого мною в прошлом “бенчмарка новичков”: измерения <code>DateTime.Now</code> до и после испытуемого на скорость кода и последующего вычисления разности. </p>
<p>Но вот в чем засада по словам автора: для <code>Windows10</code> частота обновления DateTime по умолчанию 64Гц. А это значит, что новое значение получается с интервалами 15,625 мс и это же значение составляет точность подхода с DateTime. Т.е для всех операций, которые выполнятся быстрее 15,625 мс мы получим значение времени выполнения интересующего кода равное 0, либо, если не повезёт, то 15,625 мс. Такая точность не всегда бывает недопустима, особенно если испытуемый на скорость код выполняется быстрее.</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> list = Enumerable.Range(<span class="number">0</span>, <span class="number">10000</span>).ToList();</span><br><span class="line">DateTime start = DateTime.Now;</span><br><span class="line">list.Sort();</span><br><span class="line">DateTime end = DateTime.Now;</span><br><span class="line">TimeSpan elapsedTime = end - start;</span><br><span class="line">Console.WriteLine(elapsedTime.TotalMilliseconds);</span><br></pre></td></tr></table></figure>

<p>Пробую код из книги на <code>Windows10</code> C#6.0 и получаю результаты около 4,5 мс. Предсказанный Андреем 0 никак получить не удалось, как и собственно 15,625 мс.</p>
<p>Двигаемся дальше.</p>
<p>По словам автора, лучшей альтернативой <code>DateTime.Now</code> является класс <code>System.Diagnostics.Stopwatch</code>. Типичное разрешение Stopwatch в <code>Windows10</code> составляет величину порядка 300-500 нс.</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> list = Enumerable.Range(<span class="number">0</span>, <span class="number">10000</span>).ToList();</span><br><span class="line"><span class="keyword">var</span> stopwatch = System.Diagnostics.Stopwatch.StartNew();</span><br><span class="line">list.Sort();</span><br><span class="line">stopwatch.Stop();</span><br><span class="line">TimeSpan elapsedTime = stopwatch.Elapsed;</span><br><span class="line">Console.WriteLine(elapsedTime.TotalMilliseconds);</span><br></pre></td></tr></table></figure>

<p>Этот код на машине автора выдавал результат в 0,05 мс. Однако на моей машине средний результат крутился в районе 0,491 мс, что в 10 раз больше, чем ожидалось!</p>
<p>Никакого анализа причин этих цифр пока привести не могу. Только начинаю погружаться в тонкости бенчмарка. Однако отмечу, что поведение <code>DateTime.Now</code> на моей машине много точнее, чем на машине автора, а <code>System.Diagnostics.Stopwatch</code> на моей машине на порядок хуже, чем на машине автора. В целом нужно согласиться с автором, что <code>Stopwatch</code> точнее (в моей случае на порядок), чем <code>DateTime.Now</code>.</p>
<p>Также следует иметь ввиду, что кроме низкого разрешения DateTime.Now работает медленнее DateTime.UtcNow, т.к. он пересчитывает часовые пояса. Соглашусь с советом Андрея Акиньшина, что в 99% случаев следует выбирать Stopwatch, а не DateTime. DateTime может потребоваться только в случае, если вам действительно нужно знать текущее время. Если реальное время не требуется, то используйте Stopwatch.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ostart.github.io/2022/02/24/datetime-vs-stopwatch/" data-id="cl2aqvtvb0007lcvsdkqjfh8e" data-title="DateTime.Now vs. Stopwatch" class="article-share-link">Поделиться</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Benchmark/" rel="tag">Benchmark</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C#</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DateTime/" rel="tag">DateTime</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Stopwatch/" rel="tag">Stopwatch</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/">Вперед &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Метки</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Benchmark/" rel="tag">Benchmark</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BenchmarkDotNet/" rel="tag">BenchmarkDotNet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C#</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Calendar/" rel="tag">Calendar</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ClearScript/" rel="tag">ClearScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CreateReactApp/" rel="tag">CreateReactApp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DateTime/" rel="tag">DateTime</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DefaultRequestHeaders/" rel="tag">DefaultRequestHeaders</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/EPPlus/" rel="tag">EPPlus</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ESLint/" rel="tag">ESLint</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/EntityFramework/" rel="tag">EntityFramework</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Enum/" rel="tag">Enum</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Excel/" rel="tag">Excel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GetWeekOfYear/" rel="tag">GetWeekOfYear</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Guid/" rel="tag">Guid</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Headers/" rel="tag">Headers</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HttpClient/" rel="tag">HttpClient</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Husky/" rel="tag">Husky</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ILSpy/" rel="tag">ILSpy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ISOWeek/" rel="tag">ISOWeek</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JS/" rel="tag">JS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LEFTJOIN/" rel="tag">LEFTJOIN</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LINQ/" rel="tag">LINQ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NSIS/" rel="tag">NSIS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NuGet/" rel="tag">NuGet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OWIN/" rel="tag">OWIN</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OrderBy/" rel="tag">OrderBy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Prettier/" rel="tag">Prettier</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ProgressiveDelayPattern/" rel="tag">ProgressiveDelayPattern</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RPM/" rel="tag">RPM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SNMP/" rel="tag">SNMP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SPEC/" rel="tag">SPEC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SelectMany/" rel="tag">SelectMany</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Stopwatch/" rel="tag">Stopwatch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Swagger/" rel="tag">Swagger</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ToDictionary/" rel="tag">ToDictionary</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ToLookup/" rel="tag">ToLookup</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TopShelf/" rel="tag">TopShelf</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VSCode/" rel="tag">VSCode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Venis-IX/" rel="tag">Venis_IX</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebAPI/" rel="tag">WebAPI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Windows-service/" rel="tag">Windows-service</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/aspnetcore/" rel="tag">aspnetcore</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bash/" rel="tag">bash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/concurrency/" rel="tag">concurrency</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cursor/" rel="tag">cursor</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/get-request/" rel="tag">get-request</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/get-response/" rel="tag">get-response</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/" rel="tag">github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/githubpages/" rel="tag">githubpages</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/net5-0/" rel="tag">net5.0</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nsis/" rel="tag">nsis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/paging/" rel="tag">paging</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pragmatic-programmer/" rel="tag">pragmatic-programmer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/printer/" rel="tag">printer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/script/" rel="tag">script</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/scripting/" rel="tag">scripting</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/server/" rel="tag">server</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/simulator/" rel="tag">simulator</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/snmp/" rel="tag">snmp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/snmpsim/" rel="tag">snmpsim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/switch/" rel="tag">switch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/syslog/" rel="tag">syslog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/thread-safe/" rel="tag">thread-safe</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%D0%A2%D0%BE%D0%BC%D0%B0%D1%81/" rel="tag">Томас</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%D0%A5%D0%B0%D0%BD%D1%82/" rel="tag">Хант</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%D0%B1%D0%BB%D0%BE%D0%B3/" rel="tag">блог</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%D0%B4%D0%BE%D0%BA%D0%B5%D1%80/" rel="tag">докер</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%D0%BF%D1%80%D0%B8%D0%BD%D1%82%D0%B5%D1%80/" rel="tag">принтер</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%81%D1%82-%D0%BF%D1%80%D0%B0%D0%B3%D0%BC%D0%B0%D1%82%D0%B8%D0%BA/" rel="tag">программист-прагматик</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%D1%81%D0%B8%D0%BC%D1%83%D0%BB%D1%8F%D1%82%D0%BE%D1%80/" rel="tag">симулятор</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5%D0%B1%D0%BB%D0%BE%D0%B3%D0%B0/" rel="tag">созданиеблога</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Облако меток</h3>
    <div class="widget tagcloud">
      <a href="/tags/Benchmark/" style="font-size: 10px;">Benchmark</a> <a href="/tags/BenchmarkDotNet/" style="font-size: 10px;">BenchmarkDotNet</a> <a href="/tags/C/" style="font-size: 20px;">C#</a> <a href="/tags/Calendar/" style="font-size: 10px;">Calendar</a> <a href="/tags/ClearScript/" style="font-size: 12.5px;">ClearScript</a> <a href="/tags/CreateReactApp/" style="font-size: 10px;">CreateReactApp</a> <a href="/tags/DateTime/" style="font-size: 10px;">DateTime</a> <a href="/tags/DefaultRequestHeaders/" style="font-size: 10px;">DefaultRequestHeaders</a> <a href="/tags/EPPlus/" style="font-size: 10px;">EPPlus</a> <a href="/tags/ESLint/" style="font-size: 10px;">ESLint</a> <a href="/tags/EntityFramework/" style="font-size: 10px;">EntityFramework</a> <a href="/tags/Enum/" style="font-size: 10px;">Enum</a> <a href="/tags/Excel/" style="font-size: 10px;">Excel</a> <a href="/tags/GetWeekOfYear/" style="font-size: 10px;">GetWeekOfYear</a> <a href="/tags/Guid/" style="font-size: 10px;">Guid</a> <a href="/tags/Headers/" style="font-size: 10px;">Headers</a> <a href="/tags/HttpClient/" style="font-size: 10px;">HttpClient</a> <a href="/tags/Husky/" style="font-size: 10px;">Husky</a> <a href="/tags/ILSpy/" style="font-size: 10px;">ILSpy</a> <a href="/tags/ISOWeek/" style="font-size: 10px;">ISOWeek</a> <a href="/tags/JS/" style="font-size: 12.5px;">JS</a> <a href="/tags/JavaScript/" style="font-size: 12.5px;">JavaScript</a> <a href="/tags/LEFTJOIN/" style="font-size: 10px;">LEFTJOIN</a> <a href="/tags/LINQ/" style="font-size: 17.5px;">LINQ</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/NSIS/" style="font-size: 15px;">NSIS</a> <a href="/tags/NuGet/" style="font-size: 10px;">NuGet</a> <a href="/tags/OWIN/" style="font-size: 10px;">OWIN</a> <a href="/tags/OrderBy/" style="font-size: 10px;">OrderBy</a> <a href="/tags/Prettier/" style="font-size: 10px;">Prettier</a> <a href="/tags/ProgressiveDelayPattern/" style="font-size: 10px;">ProgressiveDelayPattern</a> <a href="/tags/RPM/" style="font-size: 12.5px;">RPM</a> <a href="/tags/React/" style="font-size: 10px;">React</a> <a href="/tags/SNMP/" style="font-size: 15px;">SNMP</a> <a href="/tags/SPEC/" style="font-size: 10px;">SPEC</a> <a href="/tags/SelectMany/" style="font-size: 10px;">SelectMany</a> <a href="/tags/Stopwatch/" style="font-size: 10px;">Stopwatch</a> <a href="/tags/Swagger/" style="font-size: 10px;">Swagger</a> <a href="/tags/ToDictionary/" style="font-size: 10px;">ToDictionary</a> <a href="/tags/ToLookup/" style="font-size: 10px;">ToLookup</a> <a href="/tags/TopShelf/" style="font-size: 10px;">TopShelf</a> <a href="/tags/VSCode/" style="font-size: 10px;">VSCode</a> <a href="/tags/Venis-IX/" style="font-size: 10px;">Venis_IX</a> <a href="/tags/WebAPI/" style="font-size: 10px;">WebAPI</a> <a href="/tags/Windows-service/" style="font-size: 12.5px;">Windows-service</a> <a href="/tags/aspnetcore/" style="font-size: 10px;">aspnetcore</a> <a href="/tags/bash/" style="font-size: 12.5px;">bash</a> <a href="/tags/concurrency/" style="font-size: 10px;">concurrency</a> <a href="/tags/cursor/" style="font-size: 10px;">cursor</a> <a href="/tags/docker/" style="font-size: 10px;">docker</a> <a href="/tags/get-request/" style="font-size: 10px;">get-request</a> <a href="/tags/get-response/" style="font-size: 10px;">get-response</a> <a href="/tags/github/" style="font-size: 10px;">github</a> <a href="/tags/githubpages/" style="font-size: 10px;">githubpages</a> <a href="/tags/net5-0/" style="font-size: 10px;">net5.0</a> <a href="/tags/nsis/" style="font-size: 15px;">nsis</a> <a href="/tags/paging/" style="font-size: 10px;">paging</a> <a href="/tags/pragmatic-programmer/" style="font-size: 10px;">pragmatic-programmer</a> <a href="/tags/printer/" style="font-size: 12.5px;">printer</a> <a href="/tags/script/" style="font-size: 12.5px;">script</a> <a href="/tags/scripting/" style="font-size: 10px;">scripting</a> <a href="/tags/server/" style="font-size: 10px;">server</a> <a href="/tags/simulator/" style="font-size: 12.5px;">simulator</a> <a href="/tags/snmp/" style="font-size: 12.5px;">snmp</a> <a href="/tags/snmpsim/" style="font-size: 12.5px;">snmpsim</a> <a href="/tags/switch/" style="font-size: 12.5px;">switch</a> <a href="/tags/syslog/" style="font-size: 10px;">syslog</a> <a href="/tags/thread-safe/" style="font-size: 10px;">thread-safe</a> <a href="/tags/%D0%A2%D0%BE%D0%BC%D0%B0%D1%81/" style="font-size: 10px;">Томас</a> <a href="/tags/%D0%A5%D0%B0%D0%BD%D1%82/" style="font-size: 10px;">Хант</a> <a href="/tags/%D0%B1%D0%BB%D0%BE%D0%B3/" style="font-size: 10px;">блог</a> <a href="/tags/%D0%B4%D0%BE%D0%BA%D0%B5%D1%80/" style="font-size: 10px;">докер</a> <a href="/tags/%D0%BF%D1%80%D0%B8%D0%BD%D1%82%D0%B5%D1%80/" style="font-size: 12.5px;">принтер</a> <a href="/tags/%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%81%D1%82-%D0%BF%D1%80%D0%B0%D0%B3%D0%BC%D0%B0%D1%82%D0%B8%D0%BA/" style="font-size: 10px;">программист-прагматик</a> <a href="/tags/%D1%81%D0%B8%D0%BC%D1%83%D0%BB%D1%8F%D1%82%D0%BE%D1%80/" style="font-size: 12.5px;">симулятор</a> <a href="/tags/%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5%D0%B1%D0%BB%D0%BE%D0%B3%D0%B0/" style="font-size: 10px;">созданиеблога</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Архив</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">апрель 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">март 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">февраль 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">декабрь 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">ноябрь 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">октябрь 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">сентябрь 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">август 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">июль 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">июнь 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Недавние записи</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/04/22/react-ts-eslint-prettier-husky/">Настройка в React/TypeScript приложении ESLint, Prettier и Husky</a>
          </li>
        
          <li>
            <a href="/2022/04/22/syslog-uncontrolled-growth/">Неконтролируемый рост системных файлов Linux</a>
          </li>
        
          <li>
            <a href="/2022/04/22/switch-by-tuples/">Сопоставление с образцом на основе кортежей</a>
          </li>
        
          <li>
            <a href="/2022/04/15/to-dictionary-vs-to-lookup/">ToDictionary vs ToLookup</a>
          </li>
        
          <li>
            <a href="/2022/03/31/sorting-tuples/">Сортировка кортежей</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 Artem Ostashchenko<br>
      Создано с помощью <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a target="_blank" rel="noopener" href="https://github.com/ostart/Skills" class="mobile-nav-link">My Skills</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>