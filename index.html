<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Artemio&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Artemio&#39;s Blog">
<meta property="og:url" content="https://ostart.github.io/index.html">
<meta property="og:site_name" content="Artemio&#39;s Blog">
<meta property="og:locale" content="ru_RU">
<meta property="article:author" content="Artem Ostashchenko">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Artemio's Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Artemio&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Hi, I&#39;m Artem Ostashchenko, a software developer. I write this blog in Russian</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" target="_blank" rel="noopener" href="https://github.com/ostart/Skills">My Skills</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS-каналы"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Поиск"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Поиск"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://ostart.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-nuget-cache-clearing" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/06/27/nuget-cache-clearing/" class="article-date">
  <time class="dt-published" datetime="2023-06-27T04:12:36.000Z" itemprop="datePublished">27-06-2023</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/06/27/nuget-cache-clearing/">Очистка кэша NuGet пакетов</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Давеча выяснил, что мой жёсткий диск забит 7,7 Гигабайтами nuget пакетов. Показалось это перебором и я решил почистить кеш.</p>
<img src="/2023/06/27/nuget-cache-clearing/nuget-before.jpg" class="" title="Состояние жёсткого диска до очищения кэша nuget пакетов">

<p>Самый простой способ сделать это - с помощью <strong>Visual Studio</strong>. Для этого перехожу в меню: <code>Tools → Options → NuGet Package Manager → General</code> и нажимаю кнопку <strong>Clear All NuGet Storage</strong>.</p>
<p>Аналогичную операцию можно выполнить из командной строки, правда для этого понадобится <a target="_blank" rel="noopener" href="https://www.nuget.org/downloads">NuGet Commandline</a>. После скачивания перехожу в папку, где расположен <code>nuget.exe</code> .</p>
<p>Чтобы увидеть локальные кэши выполняю команду:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nuget locals all -list</span><br></pre></td></tr></table></figure>

<p>Чтобы очистить локальные кэши выполняю команду:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nuget locals all -clear</span><br></pre></td></tr></table></figure>

<p>Вот вывод терминала касательно моих кэшей на рабочей машине и процесса их очистки:</p>
<img src="/2023/06/27/nuget-cache-clearing/nuget-terminal.jpg" class="" title="Запуск команд очистки локальных кэшей в терминале">

<p>Затем повторно оцениваю содержимое категории <strong>Other</strong> в операционной системе:</p>
<img src="/2023/06/27/nuget-cache-clearing/nuget-after.jpg" class="" title="Состояние жёсткого диска после очищения кэша nuget пакетов">

<p>Результатом удовлетворён. Заодно почистил неактуальные сырцы (source) и кэш vscode.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ostart.github.io/2023/06/27/nuget-cache-clearing/" data-id="cljdu360e00148ovs84eu6grk" data-title="Очистка кэша NuGet пакетов" class="article-share-link">Поделиться</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Commandline/" rel="tag">Commandline</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NuGet/" rel="tag">NuGet</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/VisualStudio/" rel="tag">VisualStudio</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-select-problem-ngx-translate-angular" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/06/25/select-problem-ngx-translate-angular/" class="article-date">
  <time class="dt-published" datetime="2023-06-25T04:24:25.000Z" itemprop="datePublished">25-06-2023</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/06/25/select-problem-ngx-translate-angular/">Об одной проблеме работы ngx-translate при первоначальной загрузке сайта на Angular</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>При исследовании аудитории пользователей моего проекта для изучения таблицы умножения <a target="_blank" rel="noopener" href="https://умнодел.рф/">УмноДел</a> выяснилось, что кроме русскоязычных пользователей, заходит немалое количество пользователей из других стран. Это подтолкнуло меня на поиски быстрого способа добавления переключателя языков (RU, EN) в моё Angular приложение. Очень большое подспорье оказала статья <a target="_blank" rel="noopener" href="https://www.codeandweb.com/babeledit/tutorials/how-to-translate-your-angular-app-with-ngx-translate">How to translate your Angular app with ngx-translate</a>, только с <em><strong>BabelEdit</strong></em> мне подружиться не удалось и многие пункты из статьи я просто выполнил вручную. В итоге всё успешно получилось и без него.</p>
<p>Только одна заковыка меня поджидала с элементом <code>&lt;mat-select&gt;</code>. При первоначальной загрузке сайта его значение по умолчанию не отображалось и создавалось впечатление, что значение не установлено, хотя это не так.</p>
<img src="/2023/06/25/select-problem-ngx-translate-angular/mat-select-unloaded-translation.jpg" class="" title="Элемент mat-select не отображает значение по умолчанию, после применения перевода при первоначальной закгрузке страницы">

<p>В конструкторе <strong>app.component.ts</strong> значение было установлено <code>selectedOperations = &#39;multiply&#39;;</code> , а при клике по элементу видно, что этот пункт уже выбран. При последующих переключениях языка <code>select</code> сразу устанавливался правильно и я начал подозревать, что проблема связана с корректной подгрузкой перевода ngx-translate при первоначальной загрузке. Какое-либо действие с элементом, либо переключение языков приводило сразу же к корректному отображению значения элемента!</p>
<p>Стоит отметить, что <em><strong>ngx-translate</strong></em> динамически подгружает переводы значений и в некоторых случаях могут вместо значений переводов отображаться ключи словарей, пока эти словари подгружаются. Это именуется глюками от использования TranslateLoader (glitches when using TranslateLoader) и решение в борьбе с ними заключается в предварительной подгрузке переводов из json-файла при первоначальной загрузке приложения. Я использовал аналогичное решение, чтобы подгрузить значения предварительно, а не только динамически.</p>
<p>Для этого в требуется включить возможность загрузки json-файлов в <strong>tsconfig.app.json</strong>:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="string">&quot;resolveJsonModule&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;esModuleInterop&quot;</span>: <span class="literal">true</span></span><br><span class="line">    ...</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>Затем добавить в файл <strong>app.component.ts</strong> загрузку дефолтного значения языка из json-файла:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> defaultLanguage <span class="keyword">from</span> <span class="string">&quot;./../assets/i18n/en.json&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>И наконец установить дефолтное значение перевода из json-файла в конструкторе:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">constructor</span>(<span class="params"><span class="keyword">private</span> bllService: BllService, <span class="keyword">private</span> translate: TranslateService</span>)</span> &#123;</span><br><span class="line">    translate.setTranslation(<span class="string">&#x27;ru&#x27;</span>, defaultLanguage);</span><br><span class="line">    translate.setDefaultLang(<span class="string">&#x27;ru&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>Как результат увидим ожидаемое поведение элемента <code>&lt;mat-select&gt;</code> с предзаполненым значением по умолчанию:</p>
<img src="/2023/06/25/select-problem-ngx-translate-angular/mat-select-correct-working.jpg" class="" title="Элемент mat-select корректно отображает значение по умолчанию, после применения перевода при первоначальной закгрузке страницы">
      
    </div>
    <footer class="article-footer">
      <a data-url="https://ostart.github.io/2023/06/25/select-problem-ngx-translate-angular/" data-id="cljdu360r001w8ovsagk4dc0q" data-title="Об одной проблеме работы ngx-translate при первоначальной загрузке сайта на Angular" class="article-share-link">Поделиться</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Angular/" rel="tag">Angular</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ngx-translate/" rel="tag">ngx-translate</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-contains-is-deprecated-in-efcore6" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/04/13/contains-is-deprecated-in-efcore6/" class="article-date">
  <time class="dt-published" datetime="2023-04-13T13:40:03.000Z" itemprop="datePublished">13-04-2023</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/04/13/contains-is-deprecated-in-efcore6/">Метод Contains больше не поддерживается в EF Core 6</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>При переходе с <code>.NET 5</code> на <code>.NET 6</code> столкнулся с такой проблемой: <code>EF Core</code> отказался строить сложные <code>IQueryable</code> запросы LINQ в <code>.NET 6</code>, с которыми ранее справлялся в <code>.NET 5</code> без проблем. Поиски ответа на вопрос, что же случилось, привели к следующему решению.</p>
<p>При использовании <code>.NET 5</code> и ниже использование метода <code>Contains</code> для проверки содержится ли значение в множестве других значений препокойно транслировалось в <code>SQL</code> выражение вида <code>WHERE City IN (&#39;Paris&#39;,&#39;London&#39;)</code>, но начиная с версии <code>.NET 6</code> метод <code>Contains</code> не может как раньше транслироваться в <code>SQL</code> и падает с исключением, предлагающим упростить выражение или переписать его через другие операторы.</p>
<p>Таким образом, такой код больше не работает в <code>.NET 6</code>:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ids = <span class="keyword">new</span> List&lt;<span class="built_in">int</span>&gt; &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> entities = dbContext.Posts.Where(p =&gt; ids.Contains(p.Id));</span><br></pre></td></tr></table></figure>

<p>Решение заключается в использовании метода <code>Any</code> вместо <code>Contains</code> для проверки содержится ли значение в множестве других значений:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ids = <span class="keyword">new</span> List&lt;<span class="built_in">int</span>&gt; &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> entities = dbContext.Posts.Where(p =&gt; ids.Any(id =&gt; id == p.Id));</span><br></pre></td></tr></table></figure>

<p>Вот такое LINQ выражение <code>.NET 6</code> уже принимает спокойно и <code>EF Core</code> транслирует в ту же самую конструкцию <code>SQL</code> вида <code>WHERE Id IN (1,2,3)</code>.</p>
<p>Переписав все конструкции содержащие <code>ids.Contains</code> в <code>ids.Any</code> всё стало работать как и прежде, и задача была успешно решена.</p>
<p>Хотел бы отметить, что данная проблема касается только выборки из множества значений. <code>String.Contains</code> данная проблема не коснулась и он нормально транслируется в конструкцию <code>SQL</code>  вида <code>LIKE</code>.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ostart.github.io/2023/04/13/contains-is-deprecated-in-efcore6/" data-id="cljdu35zv00098ovs3bbzfoja" data-title="Метод Contains больше не поддерживается в EF Core 6" class="article-share-link">Поделиться</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NET5/" rel="tag">.NET5</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NET6/" rel="tag">.NET6</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C#</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/EFCore5/" rel="tag">EFCore5</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/EFCore6/" rel="tag">EFCore6</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/EntityFramework/" rel="tag">EntityFramework</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/LINQ/" rel="tag">LINQ</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-required-query-string-in-aspnet-core" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/12/21/required-query-string-in-aspnet-core/" class="article-date">
  <time class="dt-published" datetime="2022-12-21T10:43:32.000Z" itemprop="datePublished">21-12-2022</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/12/21/required-query-string-in-aspnet-core/">Обязательный QueryString параметр в ASP.NET Core</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>У меня возникла потребность для <code>HttpGet</code> запроса проверять, что в качестве <code>QueryString</code> параметра запроса прислан не просто какой-то там <code>string</code>, а что присланое значение успешно преобразуется к перечислению <code>Enum</code> вида:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="built_in">enum</span> QrCodeTypeEnum</span><br><span class="line">&#123;</span><br><span class="line">    Location,</span><br><span class="line">    Device </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Причём если <code>QueryString</code> параметр “левый”, или вообще не прислан, то не должно самопроизвольно выбираться дефолтное значение перечисления <code>QrCodeTypeEnum.Location</code> как при обычном <code>[FromQuery]</code> аттрибуте (тут даже аттрибут <code>[BindRequired]</code> не поможет).</p>
<p>Для решения данной задачи потребовалось расширить возможности <code>FromQueryAttribute</code> и реализовать интерфейс <code>IParameterModelConvention</code>, который обязует имплементировать метод <code>void Apply(ParameterModel parameter)</code>.</p>
<p>Вот как я это сделал:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> System.Linq;</span><br><span class="line"><span class="keyword">using</span> Microsoft.AspNetCore.Mvc.ApplicationModels;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ReSharper disable once CheckNamespace</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Microsoft.AspNetCore.Mvc</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">RequiredFromQueryAttribute</span> : <span class="title">FromQueryAttribute</span>, <span class="title">IParameterModelConvention</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Apply</span>(<span class="params">ParameterModel parameter</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (parameter.Action.Selectors != <span class="literal">null</span> &amp;&amp; parameter.Action.Selectors.Any())</span><br><span class="line">            &#123;</span><br><span class="line">                Func&lt;<span class="built_in">string</span>, <span class="built_in">bool</span>&gt; rejectionPredicate = <span class="literal">null</span>;</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span> (parameter.ParameterType.IsEnum)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">var</span> array = Enum.GetValues(parameter.ParameterType);</span><br><span class="line">                    List&lt;<span class="built_in">string</span>&gt; values = <span class="literal">null</span>;</span><br><span class="line">                    <span class="keyword">foreach</span> (<span class="keyword">var</span> paramValue <span class="keyword">in</span> array)</span><br><span class="line">                    &#123;</span><br><span class="line">                        values ??= <span class="keyword">new</span> List&lt;<span class="built_in">string</span>&gt;();</span><br><span class="line">                        values.Add(paramValue.ToString());</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (values <span class="keyword">is</span> &#123; Count: &gt; <span class="number">0</span> &#125;)</span><br><span class="line">                        rejectionPredicate = x =&gt; !values.Contains(x, StringComparer.InvariantCultureIgnoreCase);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                parameter.Action.Selectors.Last().ActionConstraints.Add(</span><br><span class="line">                    <span class="keyword">new</span> RequiredFromQueryActionConstraint(</span><br><span class="line">                            parameter.BindingInfo?.BinderModelName ?? parameter.ParameterName, rejectionPredicate</span><br><span class="line">                        )</span><br><span class="line">                    );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>При инициализации контроллера, содержащего наш атрибут <code>[RequiredFromQuery]</code>, происходит вызов метода <code>Apply</code>, который понимает, что аттрибут применён к перечислению, благодаря свойству <code>parameter.ParameterType.IsEnum</code>, и формирует предикат, который передаётся конструктору <code>RequiredFromQueryActionConstraint</code> и будет использован при поступлении запроса в контроллер для проверки поступающего значения в <code>QueryString</code>.</p>
<p>Давайте взглянем как реализован класс <code>RequiredFromQueryActionConstraint</code>, который имплементирует интерфейс <code>IActionConstraint</code>:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> Microsoft.AspNetCore.Mvc.ActionConstraints;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ReSharper disable once CheckNamespace</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Microsoft.AspNetCore.Mvc</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">RequiredFromQueryActionConstraint</span> : <span class="title">IActionConstraint</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">readonly</span> <span class="built_in">string</span> _parameterKey;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">readonly</span> Func&lt;<span class="built_in">string</span>, <span class="built_in">bool</span>&gt; _rejectionPredicate;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">RequiredFromQueryActionConstraint</span>(<span class="params"><span class="built_in">string</span> parameterKey, Func&lt;<span class="built_in">string</span>, <span class="built_in">bool</span>&gt; rejectionPredicate</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            _parameterKey = parameterKey;</span><br><span class="line">            _rejectionPredicate = rejectionPredicate;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">int</span> Order =&gt; <span class="number">999</span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="built_in">bool</span> <span class="title">Accept</span>(<span class="params">ActionConstraintContext context</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (!context.RouteContext.HttpContext.Request.Query.ContainsKey(_parameterKey))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (!context.RouteContext.HttpContext.Request.Query.TryGetValue(_parameterKey, <span class="keyword">out</span> <span class="keyword">var</span> <span class="keyword">value</span>))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> (_rejectionPredicate != <span class="literal">null</span> &amp;&amp; _rejectionPredicate.Invoke(<span class="keyword">value</span>.ToString()))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>При поступлении <code>HttpGet</code> запроса вида <code>/v3/device/download-report?type=device</code> к контроллеру <code>device</code>, вызывается метод <code>Accept</code> класса <code>RequiredFromQueryActionConstraint </code>, который проверяет наличие ключа <code>type</code>, наличие значения у этого ключа, и что значение ключа соответствует предикату <code>_rejectionPredicate</code>, который формируется из значений перечисления в методе <code>Apply</code> атрибута <code>RequiredFromQueryAttribute</code>. Теперь проверка <code>QueryString</code> параметра запроса осуществляется строго, и в случае отсутствия ключа <code>type</code>, либо неверного (отсутствующего в перечислении) значения ключа <code>type</code> методом будет дан ответ с кодом 400 и сообщением вида:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;id&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;The value &#x27;download-report&#x27; is not valid.&quot;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Использовать атрибут <code>[RequiredFromQuery]</code> можно в методе контроллера следующим образом:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">HttpGet(<span class="meta-string">&quot;download-report&quot;</span>)</span>]</span><br><span class="line">[<span class="meta">Authorize(Policy = PolicyNameProvider.AuthenticatedIdentityIsCurrentAccountAdmin)</span>]</span><br><span class="line"><span class="function"><span class="keyword">public</span> FileStreamResult <span class="title">DownloadAccountQrCodesReport</span>(<span class="params">[RequiredFromQuery] QrCodeTypeEnum type</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> qrCodeType = type.ToQrCodeType();</span><br><span class="line">    ... и так далее</span><br></pre></td></tr></table></figure>

<p>При решении данной задачи я опирался на статью <a target="_blank" rel="noopener" href="https://www.strathweb.com/2016/09/required-query-string-parameters-in-asp-net-core-mvc/">Required query string parameters in ASP.NET Core MVC</a>, где содержится намного больше деталей описанного выше процесса.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ostart.github.io/2022/12/21/required-query-string-in-aspnet-core/" data-id="cljdu360m001l8ovsazc355fe" data-title="Обязательный QueryString параметр в ASP.NET Core" class="article-share-link">Поделиться</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ASP-NETCore/" rel="tag">ASP.NETCore</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C#</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-restore-db-postgres" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/12/21/restore-db-postgres/" class="article-date">
  <time class="dt-published" datetime="2022-12-21T10:19:19.000Z" itemprop="datePublished">21-12-2022</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/12/21/restore-db-postgres/">Как восстановить базу данных из файла бэкапа в PostgreSQL</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Для восстановления базы данных из файла бэкапа в PostgreSQL есть несколько методов, но если размер файла с “дампом” очень велик, то восстановить базу можно <strong>только из консоли</strong>.</p>
<p>Для этого открываем PowerShell от имени администратора и выполняем следующую команду вида:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">psql -U username -d database_name -f backup.sql</span><br></pre></td></tr></table></figure>
<p>, где <code>username</code> - имя пользователя базы данных, <code>database_name</code> - имя базы данных, <code>backup.sql</code> - имя файла с бэкапом базы данных.</p>
<p>Например:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">psql -U postgreadmin -d smp_tech -f &quot;D:\\smp_tech_20221208.sql&quot;</span><br></pre></td></tr></table></figure>
<p>, где postgreadmin - имя владельца базы данных smp_tech, а <code>&quot;D:\\smp_tech_20221208.sql&quot;</code> - путь к файлу с “дампом” базы.</p>
<p>После ввода этой команды консоль попросит пароль пользователя postgreadmin и восстановит базу данных.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ostart.github.io/2022/12/21/restore-db-postgres/" data-id="cljdu360o001q8ovs9ctuad6d" data-title="Как восстановить базу данных из файла бэкапа в PostgreSQL" class="article-share-link">Поделиться</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PostgreSQL/" rel="tag">PostgreSQL</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-decrease-mssqlserver-logfile-size" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/12/21/decrease-mssqlserver-logfile-size/" class="article-date">
  <time class="dt-published" datetime="2022-12-21T09:53:39.000Z" itemprop="datePublished">21-12-2022</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/12/21/decrease-mssqlserver-logfile-size/">Как уменьшить размер файла логов в Microsoft SQL Server</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>При создании Базы Данных (БД) в MS SQL Server для оптимизации логирования БД требуется установить <em>Recovery Mode</em> в значение <strong>Simple</strong>.</p>
<p>Для уже созданной БД с режимом <em>Recovery Mode</em> = <strong>Full</strong> требуется перейти в свойства БД и в разделе Options перевести соответствующую настройку из значения <strong>Full</strong>:</p>
<img src="/2022/12/21/decrease-mssqlserver-logfile-size/decrease-mssqlserver-logfile-size-1.png" class="" title="NSIS Intro">

<p>в значение <strong>Simple</strong>:</p>
<img src="/2022/12/21/decrease-mssqlserver-logfile-size/decrease-mssqlserver-logfile-size-2.png" class="" title="NSIS Intro">

<p>Затем необходимо очистить лишние записи действий в файле логов, т.к. модель восстановления данных <em>Recovery Mode</em> изменилась.</p>
<p>Для этого выберите требующуюся БД, затем кликните по ней Правой Кнопкой Мыши (ПКМ) и выберите <em>Tasks → Shrink → Files</em>:</p>
<img src="/2022/12/21/decrease-mssqlserver-logfile-size/decrease-mssqlserver-logfile-size-3.png" class="" title="NSIS Intro">

<p>После этого в появившемся окне формы <strong>Shrink File</strong> требуется установить <em>File type</em>: <strong>Log</strong> и выбрать <strong>Release unused space</strong></p>
<img src="/2022/12/21/decrease-mssqlserver-logfile-size/decrease-mssqlserver-logfile-size-4.png" class="" title="NSIS Intro">

<p>Текущий размер занимаемого дискового пространства логами и свободное место для них можно оценить с помощью параметров <em>Currently allocated space</em> и <em>Available free space</em> этой же формы <strong>Shrink File</strong> (при повторном её открытии можно увидеть размеры после применения операции сжатия файла логов)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ostart.github.io/2022/12/21/decrease-mssqlserver-logfile-size/" data-id="cljdu35zx000c8ovs2wepehkm" data-title="Как уменьшить размер файла логов в Microsoft SQL Server" class="article-share-link">Поделиться</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MicrosoftSQLServer/" rel="tag">MicrosoftSQLServer</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-react-ts-eslint-prettier-husky" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/04/22/react-ts-eslint-prettier-husky/" class="article-date">
  <time class="dt-published" datetime="2022-04-22T16:59:24.000Z" itemprop="datePublished">22-04-2022</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/04/22/react-ts-eslint-prettier-husky/">Настройка в React/TypeScript приложении ESLint, Prettier и Husky</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Попросили меня друзья помочь с настройкой <code>CreateReactApp</code> (<em>CRA</em>) приложения, чтобы синтаксис проверялся, красота кода в одном стиле автоматически наводилась, и чтобы не давало закоммитить, если всё вышесказанное не выполняется.</p>
<p>Начал я с настройки <em>ESLint</em>. Он нужен для проверки синтаксиса, стиля кодирования и поиска ошибок в коде. По умолчанию <em>ESLint</em> уже есть в <em>CRA</em>, его нужно только инициализировать через консоль в папке проекта:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn eslint --init</span><br></pre></td></tr></table></figure>

<p>И затем настроить. Установите через консоль следующие плагины в папку проекта:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add -D @typescript-eslint/eslint-plugin @typescript-eslint/parser eslint-config-airbnb-typescript eslint-plugin-jest eslint-config-airbnb</span><br></pre></td></tr></table></figure>

<p>Заполните файл .eslintrc.json следующими настройками:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;env&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;browser&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">&quot;es2022&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">&quot;jest&quot;</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;extends&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;airbnb-typescript&quot;</span>,</span><br><span class="line">        <span class="string">&quot;airbnb/hooks&quot;</span>,</span><br><span class="line">        <span class="string">&quot;eslint:recommended&quot;</span>,</span><br><span class="line">        <span class="string">&quot;plugin:react/recommended&quot;</span>,</span><br><span class="line">        <span class="string">&quot;plugin:react/jsx-runtime&quot;</span>,</span><br><span class="line">        <span class="string">&quot;plugin:@typescript-eslint/recommended&quot;</span>,</span><br><span class="line">        <span class="string">&quot;plugin:jest/recommended&quot;</span>,</span><br><span class="line">        <span class="string">&quot;plugin:prettier/recommended&quot;</span>,</span><br><span class="line">        <span class="string">&quot;plugin:import/recommended&quot;</span>,</span><br><span class="line">        <span class="string">&quot;prettier&quot;</span>      </span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;parser&quot;</span>: <span class="string">&quot;@typescript-eslint/parser&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;parserOptions&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;ecmaFeatures&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;jsx&quot;</span>: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;ecmaVersion&quot;</span>: <span class="string">&quot;latest&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;sourceType&quot;</span>: <span class="string">&quot;module&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;project&quot;</span>: <span class="string">&quot;./tsconfig.json&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;plugins&quot;</span>: [ <span class="string">&quot;react&quot;</span>, <span class="string">&quot;@typescript-eslint&quot;</span>, <span class="string">&quot;jest&quot;</span> ],</span><br><span class="line">    <span class="attr">&quot;rules&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;no-alert&quot;</span>: <span class="string">&quot;warn&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;no-console&quot;</span>: <span class="string">&quot;warn&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;linebreak-style&quot;</span>: <span class="string">&quot;off&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;prettier/prettier&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;error&quot;</span>,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;endOfLine&quot;</span>: <span class="string">&quot;auto&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123; <span class="attr">&quot;usePrettierrc&quot;</span>: <span class="literal">true</span> &#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">&quot;react/prop-types&quot;</span>: <span class="string">&quot;off&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;@typescript-eslint/no-unused-vars&quot;</span>: [<span class="string">&quot;warn&quot;</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;settings&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;react&quot;</span>: &#123;</span><br><span class="line">          <span class="attr">&quot;createClass&quot;</span>: <span class="string">&quot;createReactClass&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;pragma&quot;</span>: <span class="string">&quot;React&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;fragment&quot;</span>: <span class="string">&quot;Fragment&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;detect&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;flowVersion&quot;</span>: <span class="string">&quot;0.53&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;propWrapperFunctions&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;forbidExtraProps&quot;</span>,</span><br><span class="line">            &#123;<span class="attr">&quot;property&quot;</span>: <span class="string">&quot;freeze&quot;</span>, <span class="attr">&quot;object&quot;</span>: <span class="string">&quot;Object&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">&quot;property&quot;</span>: <span class="string">&quot;myFavoriteWrapper&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">&quot;property&quot;</span>: <span class="string">&quot;forbidExtraProps&quot;</span>, <span class="attr">&quot;exact&quot;</span>: <span class="literal">true</span>&#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">&quot;componentWrapperFunctions&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;observer&quot;</span>,</span><br><span class="line">            &#123;<span class="attr">&quot;property&quot;</span>: <span class="string">&quot;styled&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">&quot;property&quot;</span>: <span class="string">&quot;observer&quot;</span>, <span class="attr">&quot;object&quot;</span>: <span class="string">&quot;Mobx&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">&quot;property&quot;</span>: <span class="string">&quot;observer&quot;</span>, <span class="attr">&quot;object&quot;</span>: <span class="string">&quot;&lt;pragma&gt;&quot;</span>&#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">&quot;formComponents&quot;</span>: [</span><br><span class="line">          <span class="string">&quot;CustomForm&quot;</span>,</span><br><span class="line">          &#123;<span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Form&quot;</span>, <span class="attr">&quot;formAttribute&quot;</span>: <span class="string">&quot;endpoint&quot;</span>&#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">&quot;linkComponents&quot;</span>: [</span><br><span class="line">          <span class="string">&quot;Hyperlink&quot;</span>,</span><br><span class="line">          &#123;<span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Link&quot;</span>, <span class="attr">&quot;linkAttribute&quot;</span>: <span class="string">&quot;to&quot;</span>&#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Из конфига <em>ESLint</em> видно, что мы используем <em>AirBnb</em>, а также настраиваем сразу и <em>Prettier</em>. <em>Prettier</em> - это инструмент автоматического форматирования кода. Для его установки запустите в консоли:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add -D prettier eslint-config-prettier eslint-plugin-prettier</span><br></pre></td></tr></table></figure>

<p>Cоветую создать файл <code>.eslintignore</code> и поместить туда следующее содержимое:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">build/*</span><br><span class="line">public/*</span><br><span class="line">docs/*</span><br><span class="line">templates/*</span><br><span class="line">src/react-app-env.d.ts</span><br><span class="line">src/serviceWorker.ts</span><br></pre></td></tr></table></figure>

<p>Создайте файл <code>.prettierrc</code> и поместите туда следующее содержимое:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;trailingComma&quot;</span>: <span class="string">&quot;es5&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;printWidth&quot;</span>: <span class="number">100</span>,</span><br><span class="line">    <span class="attr">&quot;semi&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">&quot;singleQuote&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;tabWidth&quot;</span>: <span class="number">2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Осталось только поправить <code>package.json</code>, внеся туда следующие секции:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    .... <span class="comment">// предыдущий полезный код скриптов</span></span><br><span class="line">    <span class="attr">&quot;format&quot;</span>: <span class="string">&quot;prettier --write src/**/*.&#123;ts,tsx,scss,css,json&#125;&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;lint&quot;</span>: <span class="string">&quot;tsc --noEmit &amp;&amp; eslint src/**/*.ts&#123;,x&#125; --color&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;lint-staged&quot;</span>: <span class="string">&quot;lint-staged&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;prepare&quot;</span>: <span class="string">&quot;husky install&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="string">&quot;eslintConfig&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;extends&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;react-app&quot;</span>,</span><br><span class="line">        <span class="string">&quot;react-app/jest&quot;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>Теперь можно проверить что всё впорядке, запустив в консоли следующие команды:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn lint</span><br><span class="line">yarn format</span><br></pre></td></tr></table></figure>

<p>Если вы настроили всё правильно команды отработают без ошибок.</p>
<p>Добавим теперь заключительную вещь: чтобы при попытке коммита в <code>git</code> запускались наши вышеуказанные скрипты, и можно было закоммитить только код, который эти скрипты успешно проходит.</p>
<p>Для этого установим <em>Husky</em>, который будет реагировать на событие попытки коммита, следующей командой из консоли:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add -D lint-staged husky</span><br></pre></td></tr></table></figure>

<p>Для инициализации <em>Husky</em> выполните в консоли команду:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn husky install</span><br></pre></td></tr></table></figure>

<p>Так как у нас версия <em>Husky</em> 7, то в соответствующей скрытой папке <code>.husky</code> необходимо внести следующие изменения в файл <code>pre-commit</code>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">. <span class="string">&quot;<span class="subst">$(dirname <span class="string">&quot;<span class="variable">$0</span>&quot;</span>)</span>/_/husky.sh&quot;</span></span><br><span class="line"></span><br><span class="line">yarn lint</span><br><span class="line">yarn format</span><br></pre></td></tr></table></figure>

<p>Теперь вам удастся закоммитить ваш код только в случае успешного выполнения скриптов из файла <code>pre-commit</code>.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ostart.github.io/2022/04/22/react-ts-eslint-prettier-husky/" data-id="cljdu360k001g8ovsb7nudy9o" data-title="Настройка в React/TypeScript приложении ESLint, Prettier и Husky" class="article-share-link">Поделиться</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CreateReactApp/" rel="tag">CreateReactApp</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ESLint/" rel="tag">ESLint</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Husky/" rel="tag">Husky</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Prettier/" rel="tag">Prettier</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/" rel="tag">React</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-syslog-uncontrolled-growth" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/04/22/syslog-uncontrolled-growth/" class="article-date">
  <time class="dt-published" datetime="2022-04-22T16:24:00.000Z" itemprop="datePublished">22-04-2022</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/04/22/syslog-uncontrolled-growth/">Неконтролируемый рост системных файлов Linux</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Интересную особенность работы ASP.NET Core приложения в Linux мне удалось недавно зафиксировать. Было установлено, что со временем системынй файлы Linux (а именно: syslog и daemon.log) вырастают до угрожающих размеров. Оказалось, что весь консольный вывод ASP.NET Core приложений попадал туда. А консольный вывод включал помимо <code>AddConsole()</code> ещё и консоль Serilog <code>Write().ConsoleColored()</code>. Выставление корректных настроек секции Logging конфигурационных файлов appsetting.json позволил установить их уровень высоким и существенно уменьшить размеры системных файлов Linux.</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;Logging&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;Console&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;LogLevel&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;*&quot;</span>: <span class="string">&quot;Error&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Оказывается, что системная служба <code>journald</code> ведёт логирование вывода на консоль в свои бинарные логи, а кроме того вносит записи о выводе на консоль в системные журналы Linux (syslog и daemon.log). Поэтому будьте внимательны при выставлении уровня логирования ваших приложений, особенно на продакшене.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ostart.github.io/2022/04/22/syslog-uncontrolled-growth/" data-id="cljdu3611002m8ovsc8jb2q4s" data-title="Неконтролируемый рост системных файлов Linux" class="article-share-link">Поделиться</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C#</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/aspnetcore/" rel="tag">aspnetcore</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/syslog/" rel="tag">syslog</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-switch-by-tuples" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/04/22/switch-by-tuples/" class="article-date">
  <time class="dt-published" datetime="2022-04-22T15:57:13.000Z" itemprop="datePublished">22-04-2022</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/04/22/switch-by-tuples/">Сопоставление с образцом на основе кортежей</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Ранее мною уже был рассмотрен один из механизмов сопоставления с образцом (паттерн матчинга) в статье <a href="https://ostart.github.io/2022/03/17/switch-by-property-values/">Сопоставление с образцом на основе значений свойств объекта</a>. В данной статье рассмотрим сопоставление с образцом на основе кортежей, что делает код намного короче.</p>
<p>Рассмотрим класс комнаты и перечисление статуса члена клуба такого вида:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Room</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Number &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Type &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Size &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Deconstruct</span>(<span class="params"><span class="keyword">out</span> <span class="built_in">string</span> type, <span class="keyword">out</span> <span class="built_in">string</span> size</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        type = type;</span><br><span class="line">        size = Size;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="built_in">enum</span> Membership</span><br><span class="line">&#123;</span><br><span class="line">    Bronze,</span><br><span class="line">    Silver,</span><br><span class="line">    Gold</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Метод <code>GetRooms</code> возвращает список комнат вида:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;Room&gt; <span class="title">GetRooms</span>(<span class="params"></span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> List&lt;Room&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">new</span> Room</span><br><span class="line">        &#123;</span><br><span class="line">            Number = <span class="number">3</span>,</span><br><span class="line">            Size = <span class="string">&quot;Large&quot;</span>,</span><br><span class="line">            Type = <span class="string">&quot;Deluxe&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="keyword">new</span> Room</span><br><span class="line">        &#123;</span><br><span class="line">            Number = <span class="number">2</span>,</span><br><span class="line">            Size = <span class="string">&quot;Large&quot;</span>,</span><br><span class="line">            Type = <span class="string">&quot;Regular&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="keyword">new</span> Room</span><br><span class="line">        &#123;</span><br><span class="line">            Number = <span class="number">1</span>,</span><br><span class="line">            Size = <span class="string">&quot;Standard&quot;</span>,</span><br><span class="line">            Type = <span class="string">&quot;Regular&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Начиная с C# 8.0 появилась возможность сопоставлять с образцом в выражении <code>switch</code>, используя деконструктор класса (см. ранее конструкцию <code>Deconstruct</code> в определении класса <code>Room</code>):</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="built_in">int</span> RoomNotAvailable = <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">AssignRoom</span>(<span class="params">Membership membership</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">foreach</span>(<span class="function"><span class="keyword">var</span> room <span class="keyword">in</span> <span class="title">GetRooms</span>(<span class="params"></span>))</span></span><br><span class="line">    &#123;</span><br><span class="line">        Membership clientCategory = room <span class="keyword">switch</span></span><br><span class="line">        &#123;</span><br><span class="line">            (<span class="string">&quot;Deluxe&quot;</span>, <span class="string">&quot;Large&quot;</span>) =&gt; Membership.Gold,</span><br><span class="line">            (<span class="string">&quot;Regular&quot;</span>, <span class="string">&quot;Large&quot;</span>) =&gt; Membership.Silver,</span><br><span class="line">            (<span class="string">&quot;Regular&quot;</span>, <span class="string">&quot;Standard&quot;</span>) =&gt; Membership.Bronze,</span><br><span class="line">            _ =&gt; Membership.Bronze</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (clientCategory == membership)</span><br><span class="line">            <span class="keyword">return</span> room.Number;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> RoomNotAvailable;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Код ветки <code>_ =&gt; Membership.Bronze</code> аналогичен случаю <code>default:</code> в стандартном <code>switch</code>.</p>
<p>Тогда основной метод программы может использовать вышеприведённый код таким образом:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> voir <span class="title">Main</span>(<span class="params"></span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    Console.Write(<span class="string">&quot;Choose status: 0 for Bronze, 1 for Silver, 2 for Gold&quot;</span>);</span><br><span class="line">    <span class="built_in">string</span> clientStatus = Console.ReadLine();</span><br><span class="line"></span><br><span class="line">    Enum.TryParse(clientStatus, <span class="keyword">out</span> Membership membership);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">int</span> roomNumber = AssignRoom(membership);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (roomNumber == RoomNotAvailable)</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Room not available&quot;</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;Room number is <span class="subst">&#123;roomNumber&#125;</span>&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Видно на сколько короче стала конструкция <code>switch</code> благодаря использованию кортежей. Компактный синтаксис кортежей делает их идеальным инструментом для сопоставления с образцом (паттерн матчинга). В остальном код и результаты идентичны приведённому в статье <a href="https://ostart.github.io/2022/03/17/switch-by-property-values/">Сопоставление с образцом на основе значений свойств объекта</a>.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ostart.github.io/2022/04/22/switch-by-tuples/" data-id="cljdu360y002b8ovsa9s32vnd" data-title="Сопоставление с образцом на основе кортежей" class="article-share-link">Поделиться</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C#</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/switch/" rel="tag">switch</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-to-dictionary-vs-to-lookup" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/04/15/to-dictionary-vs-to-lookup/" class="article-date">
  <time class="dt-published" datetime="2022-04-15T07:52:53.000Z" itemprop="datePublished">15-04-2022</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/04/15/to-dictionary-vs-to-lookup/">ToDictionary vs ToLookup</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Встречается необходимость, сгруппировав элементы, преобразовать их в структуру данных для поиска группы по ключу группировки. Это можно сделать, например, так:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>[] names = &#123;<span class="string">&quot;Pavel&quot;</span>, <span class="string">&quot;Peter&quot;</span>, <span class="string">&quot;Andrew&quot;</span>, <span class="string">&quot;Anna&quot;</span>, <span class="string">&quot;Alice&quot;</span>, <span class="string">&quot;John&quot;</span>&#125;;</span><br><span class="line"><span class="keyword">var</span> namesByLetter = <span class="keyword">new</span> Dictionary&lt;<span class="built_in">char</span>, List&lt;<span class="built_in">string</span>&gt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> <span class="keyword">group</span> <span class="keyword">in</span> names.GroupBy(name =&gt; name[<span class="number">0</span>]))</span><br><span class="line">	namesByLetter.Add(<span class="keyword">group</span>.Key, <span class="keyword">group</span>.ToList());</span><br><span class="line"></span><br><span class="line">Assert.That(namesByLetter[<span class="string">&#x27;J&#x27;</span>], Is.EquivalentTo(<span class="keyword">new</span>[] &#123; <span class="string">&quot;John&quot;</span> &#125;));</span><br><span class="line">Assert.That(namesByLetter[<span class="string">&#x27;P&#x27;</span>], Is.EquivalentTo(<span class="keyword">new</span>[] &#123;<span class="string">&quot;Pavel&quot;</span>, <span class="string">&quot;Peter&quot;</span>&#125;));</span><br><span class="line">Assert.IsFalse(namesByLetter.ContainsKey(<span class="string">&#x27;Z&#x27;</span>));</span><br></pre></td></tr></table></figure>

<p>Ровно того же эффекта можно добиться и без цикла при помощи LINQ-метода <code>ToDictionary</code>, имеющего следующую сигнатуру:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">IDictionary&lt;K, V&gt; <span class="title">ToDictionary</span>(<span class="params"><span class="keyword">this</span> IEnumerable&lt;T&gt; items, Func&lt;T, K&gt; keySelector, Func&lt;T, V&gt; valueSelector</span>)</span></span><br></pre></td></tr></table></figure>

<p>Тогда предыдущий пример с <code>foreach</code> в случае <code>ToDictionary</code> примет следующий вид:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>[] names = &#123;<span class="string">&quot;Pavel&quot;</span>, <span class="string">&quot;Peter&quot;</span>, <span class="string">&quot;Andrew&quot;</span>, <span class="string">&quot;Anna&quot;</span>, <span class="string">&quot;Alice&quot;</span>, <span class="string">&quot;John&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">Dictionary&lt;<span class="built_in">char</span>, List&lt;<span class="built_in">string</span>&gt;&gt; namesByLetter = names</span><br><span class="line">	.GroupBy(name =&gt; name[<span class="number">0</span>])</span><br><span class="line">	.ToDictionary(<span class="keyword">group</span> =&gt; <span class="keyword">group</span>.Key, <span class="keyword">group</span> =&gt; <span class="keyword">group</span>.ToList());</span><br><span class="line"></span><br><span class="line">Assert.That(namesByLetter[<span class="string">&#x27;J&#x27;</span>], Is.EquivalentTo(<span class="keyword">new</span>[] &#123; <span class="string">&quot;John&quot;</span> &#125;));</span><br><span class="line">Assert.That(namesByLetter[<span class="string">&#x27;P&#x27;</span>], Is.EquivalentTo(<span class="keyword">new</span>[] &#123;<span class="string">&quot;Pavel&quot;</span>, <span class="string">&quot;Peter&quot;</span>&#125;));</span><br><span class="line">Assert.IsFalse(namesByLetter.ContainsKey(<span class="string">&#x27;Z&#x27;</span>));</span><br></pre></td></tr></table></figure>

<p>Ещё проще воспользоваться LINQ-методом <code>ToLookup</code>, имеющим следующие сигнатуры:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">ILookup&lt;K, T&gt; <span class="title">ToLookup</span>(<span class="params"><span class="keyword">this</span> IEnumerable&lt;T&gt; items, Func&lt;T, K&gt; keySelector</span>)</span></span><br></pre></td></tr></table></figure>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">ILookup&lt;K, V&gt; <span class="title">ToLookup</span>(<span class="params"><span class="keyword">this</span> IEnumerable&lt;T&gt; items, Func&lt;T, K&gt; keySelector, Func&lt;T, V&gt; valueSelector</span>)</span></span><br></pre></td></tr></table></figure>

<p>В отличие от словаря, <code>Lookup</code> является неизменяемым (immutable) типом. У него нет методов типа <code>Add</code> и открытого конструктора. Интересно, что <code>Lookup</code> по неизвестному ключу возвращает пустую коллекцию, а Dictionary в такой ситуации выбрасывает исключение. Также в <code>Lookup</code> можно использовать ключи типа <code>null</code>.<br>Замечу, что операции <code>list.ToLookup(x =&gt; x)</code> и <code>list.GroupBy(x =&gt; x).ToDictionary(group =&gt; group.Key)</code> семантически эквивалентны.</p>
<p>Пример с <code>foreach</code> и <code>ToDictionary</code> в случае <code>ToLookup</code> примет следующий вид:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>[] names = &#123;<span class="string">&quot;Pavel&quot;</span>, <span class="string">&quot;Peter&quot;</span>, <span class="string">&quot;Andrew&quot;</span>, <span class="string">&quot;Anna&quot;</span>, <span class="string">&quot;Alice&quot;</span>, <span class="string">&quot;John&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">ILookup&lt;<span class="built_in">char</span>, <span class="built_in">string</span>&gt; namesByLetter = names.ToLookup(name =&gt; name[<span class="number">0</span>], name =&gt; name.ToLower());</span><br><span class="line"></span><br><span class="line">Assert.That(namesByLetter[<span class="string">&#x27;J&#x27;</span>], Is.EquivalentTo(<span class="keyword">new</span>[] &#123;<span class="string">&quot;john&quot;</span>&#125;));</span><br><span class="line">Assert.That(namesByLetter[<span class="string">&#x27;P&#x27;</span>], Is.EquivalentTo(<span class="keyword">new</span>[] &#123;<span class="string">&quot;pavel&quot;</span>, <span class="string">&quot;peter&quot;</span>&#125;));</span><br><span class="line">			</span><br><span class="line"><span class="comment">// Lookup по неизвестному ключу возвращает пустую коллекцию. </span></span><br><span class="line"><span class="comment">// Это бывает удобнее, чем поведение Dictionary, который в такой ситуации бросает исключение.</span></span><br><span class="line">Assert.That(namesByLetter[<span class="string">&#x27;Z&#x27;</span>], Is.Empty);</span><br></pre></td></tr></table></figure>

<p>В русскоязычной литературе <code>Lookup</code> раньше именовался таблицей истинности. <code>Lookup</code> можно использовать в построении обратного индекса. Обратный индекс — это структура данных, часто использующаяся в задачах полнотекстового поиска нужного документа в большой базе документов. По своей сути обратный индекс напоминает индекс в конце бумажных энциклопедий, где для каждого ключевого слова указан список страниц, где оно встречается.</p>
<p>Допустим наш документ определён так:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Document</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">int</span> Id;</span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">string</span> Text;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Тогда для списка документов обратный индекс можно получить так:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ILookup&lt;<span class="built_in">string</span>, <span class="built_in">int</span>&gt; <span class="title">BuildInvertedIndex</span>(<span class="params">Document[] documents</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> documents</span><br><span class="line">        .SelectMany(x =&gt; Regex.Split(x.Text, <span class="string">@&quot;\W+&quot;</span>)</span><br><span class="line">		    .Where(x =&gt; x.Length &gt; <span class="number">0</span>)</span><br><span class="line">		        .Select(y =&gt; Tuple.Create(y.ToLower(), x.Id)))</span><br><span class="line">		            .Distinct()</span><br><span class="line">        .ToLookup(x =&gt; x.Item1, x =&gt; x.Item2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ostart.github.io/2022/04/15/to-dictionary-vs-to-lookup/" data-id="cljdu3611002k8ovsed41242m" data-title="ToDictionary vs ToLookup" class="article-share-link">Поделиться</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C#</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/LINQ/" rel="tag">LINQ</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ToDictionary/" rel="tag">ToDictionary</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ToLookup/" rel="tag">ToLookup</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/2/">Вперед &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Метки</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/NET5/" rel="tag">.NET5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NET6/" rel="tag">.NET6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ASP-NETCore/" rel="tag">ASP.NETCore</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Angular/" rel="tag">Angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Benchmark/" rel="tag">Benchmark</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BenchmarkDotNet/" rel="tag">BenchmarkDotNet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C#</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Calendar/" rel="tag">Calendar</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ClearScript/" rel="tag">ClearScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Commandline/" rel="tag">Commandline</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CreateReactApp/" rel="tag">CreateReactApp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DateTime/" rel="tag">DateTime</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DefaultRequestHeaders/" rel="tag">DefaultRequestHeaders</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/EFCore5/" rel="tag">EFCore5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/EFCore6/" rel="tag">EFCore6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/EPPlus/" rel="tag">EPPlus</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ESLint/" rel="tag">ESLint</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/EntityFramework/" rel="tag">EntityFramework</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Enum/" rel="tag">Enum</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Excel/" rel="tag">Excel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GetWeekOfYear/" rel="tag">GetWeekOfYear</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Guid/" rel="tag">Guid</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Headers/" rel="tag">Headers</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HttpClient/" rel="tag">HttpClient</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Husky/" rel="tag">Husky</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ILSpy/" rel="tag">ILSpy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ISOWeek/" rel="tag">ISOWeek</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JS/" rel="tag">JS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LEFTJOIN/" rel="tag">LEFTJOIN</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LINQ/" rel="tag">LINQ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MicrosoftSQLServer/" rel="tag">MicrosoftSQLServer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NSIS/" rel="tag">NSIS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NuGet/" rel="tag">NuGet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OWIN/" rel="tag">OWIN</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OrderBy/" rel="tag">OrderBy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PostgreSQL/" rel="tag">PostgreSQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Prettier/" rel="tag">Prettier</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ProgressiveDelayPattern/" rel="tag">ProgressiveDelayPattern</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RPM/" rel="tag">RPM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SNMP/" rel="tag">SNMP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SPEC/" rel="tag">SPEC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SelectMany/" rel="tag">SelectMany</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Stopwatch/" rel="tag">Stopwatch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Swagger/" rel="tag">Swagger</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ToDictionary/" rel="tag">ToDictionary</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ToLookup/" rel="tag">ToLookup</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TopShelf/" rel="tag">TopShelf</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VSCode/" rel="tag">VSCode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Venis-IX/" rel="tag">Venis_IX</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VisualStudio/" rel="tag">VisualStudio</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebAPI/" rel="tag">WebAPI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Windows-service/" rel="tag">Windows-service</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/aspnetcore/" rel="tag">aspnetcore</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bash/" rel="tag">bash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/concurrency/" rel="tag">concurrency</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cursor/" rel="tag">cursor</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/get-request/" rel="tag">get-request</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/get-response/" rel="tag">get-response</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/" rel="tag">github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/githubpages/" rel="tag">githubpages</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/net5-0/" rel="tag">net5.0</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ngx-translate/" rel="tag">ngx-translate</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nsis/" rel="tag">nsis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/paging/" rel="tag">paging</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pragmatic-programmer/" rel="tag">pragmatic-programmer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/printer/" rel="tag">printer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/script/" rel="tag">script</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/scripting/" rel="tag">scripting</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/server/" rel="tag">server</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/simulator/" rel="tag">simulator</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/snmp/" rel="tag">snmp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/snmpsim/" rel="tag">snmpsim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/switch/" rel="tag">switch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/syslog/" rel="tag">syslog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/thread-safe/" rel="tag">thread-safe</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%D0%A2%D0%BE%D0%BC%D0%B0%D1%81/" rel="tag">Томас</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%D0%A5%D0%B0%D0%BD%D1%82/" rel="tag">Хант</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%D0%B1%D0%BB%D0%BE%D0%B3/" rel="tag">блог</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%D0%B4%D0%BE%D0%BA%D0%B5%D1%80/" rel="tag">докер</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%D0%BF%D1%80%D0%B8%D0%BD%D1%82%D0%B5%D1%80/" rel="tag">принтер</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%81%D1%82-%D0%BF%D1%80%D0%B0%D0%B3%D0%BC%D0%B0%D1%82%D0%B8%D0%BA/" rel="tag">программист-прагматик</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%D1%81%D0%B8%D0%BC%D1%83%D0%BB%D1%8F%D1%82%D0%BE%D1%80/" rel="tag">симулятор</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5%D0%B1%D0%BB%D0%BE%D0%B3%D0%B0/" rel="tag">созданиеблога</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Облако меток</h3>
    <div class="widget tagcloud">
      <a href="/tags/NET5/" style="font-size: 10px;">.NET5</a> <a href="/tags/NET6/" style="font-size: 10px;">.NET6</a> <a href="/tags/ASP-NETCore/" style="font-size: 10px;">ASP.NETCore</a> <a href="/tags/Angular/" style="font-size: 10px;">Angular</a> <a href="/tags/Benchmark/" style="font-size: 10px;">Benchmark</a> <a href="/tags/BenchmarkDotNet/" style="font-size: 10px;">BenchmarkDotNet</a> <a href="/tags/C/" style="font-size: 20px;">C#</a> <a href="/tags/Calendar/" style="font-size: 10px;">Calendar</a> <a href="/tags/ClearScript/" style="font-size: 12.5px;">ClearScript</a> <a href="/tags/Commandline/" style="font-size: 10px;">Commandline</a> <a href="/tags/CreateReactApp/" style="font-size: 10px;">CreateReactApp</a> <a href="/tags/DateTime/" style="font-size: 10px;">DateTime</a> <a href="/tags/DefaultRequestHeaders/" style="font-size: 10px;">DefaultRequestHeaders</a> <a href="/tags/EFCore5/" style="font-size: 10px;">EFCore5</a> <a href="/tags/EFCore6/" style="font-size: 10px;">EFCore6</a> <a href="/tags/EPPlus/" style="font-size: 10px;">EPPlus</a> <a href="/tags/ESLint/" style="font-size: 10px;">ESLint</a> <a href="/tags/EntityFramework/" style="font-size: 12.5px;">EntityFramework</a> <a href="/tags/Enum/" style="font-size: 10px;">Enum</a> <a href="/tags/Excel/" style="font-size: 10px;">Excel</a> <a href="/tags/GetWeekOfYear/" style="font-size: 10px;">GetWeekOfYear</a> <a href="/tags/Guid/" style="font-size: 10px;">Guid</a> <a href="/tags/Headers/" style="font-size: 10px;">Headers</a> <a href="/tags/HttpClient/" style="font-size: 10px;">HttpClient</a> <a href="/tags/Husky/" style="font-size: 10px;">Husky</a> <a href="/tags/ILSpy/" style="font-size: 10px;">ILSpy</a> <a href="/tags/ISOWeek/" style="font-size: 10px;">ISOWeek</a> <a href="/tags/JS/" style="font-size: 12.5px;">JS</a> <a href="/tags/JavaScript/" style="font-size: 12.5px;">JavaScript</a> <a href="/tags/LEFTJOIN/" style="font-size: 10px;">LEFTJOIN</a> <a href="/tags/LINQ/" style="font-size: 17.5px;">LINQ</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/MicrosoftSQLServer/" style="font-size: 10px;">MicrosoftSQLServer</a> <a href="/tags/NSIS/" style="font-size: 15px;">NSIS</a> <a href="/tags/NuGet/" style="font-size: 12.5px;">NuGet</a> <a href="/tags/OWIN/" style="font-size: 10px;">OWIN</a> <a href="/tags/OrderBy/" style="font-size: 10px;">OrderBy</a> <a href="/tags/PostgreSQL/" style="font-size: 10px;">PostgreSQL</a> <a href="/tags/Prettier/" style="font-size: 10px;">Prettier</a> <a href="/tags/ProgressiveDelayPattern/" style="font-size: 10px;">ProgressiveDelayPattern</a> <a href="/tags/RPM/" style="font-size: 12.5px;">RPM</a> <a href="/tags/React/" style="font-size: 10px;">React</a> <a href="/tags/SNMP/" style="font-size: 15px;">SNMP</a> <a href="/tags/SPEC/" style="font-size: 10px;">SPEC</a> <a href="/tags/SelectMany/" style="font-size: 10px;">SelectMany</a> <a href="/tags/Stopwatch/" style="font-size: 10px;">Stopwatch</a> <a href="/tags/Swagger/" style="font-size: 10px;">Swagger</a> <a href="/tags/ToDictionary/" style="font-size: 10px;">ToDictionary</a> <a href="/tags/ToLookup/" style="font-size: 10px;">ToLookup</a> <a href="/tags/TopShelf/" style="font-size: 10px;">TopShelf</a> <a href="/tags/VSCode/" style="font-size: 10px;">VSCode</a> <a href="/tags/Venis-IX/" style="font-size: 10px;">Venis_IX</a> <a href="/tags/VisualStudio/" style="font-size: 10px;">VisualStudio</a> <a href="/tags/WebAPI/" style="font-size: 10px;">WebAPI</a> <a href="/tags/Windows-service/" style="font-size: 12.5px;">Windows-service</a> <a href="/tags/aspnetcore/" style="font-size: 10px;">aspnetcore</a> <a href="/tags/bash/" style="font-size: 12.5px;">bash</a> <a href="/tags/concurrency/" style="font-size: 10px;">concurrency</a> <a href="/tags/cursor/" style="font-size: 10px;">cursor</a> <a href="/tags/docker/" style="font-size: 10px;">docker</a> <a href="/tags/get-request/" style="font-size: 10px;">get-request</a> <a href="/tags/get-response/" style="font-size: 10px;">get-response</a> <a href="/tags/github/" style="font-size: 10px;">github</a> <a href="/tags/githubpages/" style="font-size: 10px;">githubpages</a> <a href="/tags/net5-0/" style="font-size: 10px;">net5.0</a> <a href="/tags/ngx-translate/" style="font-size: 10px;">ngx-translate</a> <a href="/tags/nsis/" style="font-size: 15px;">nsis</a> <a href="/tags/paging/" style="font-size: 10px;">paging</a> <a href="/tags/pragmatic-programmer/" style="font-size: 10px;">pragmatic-programmer</a> <a href="/tags/printer/" style="font-size: 12.5px;">printer</a> <a href="/tags/script/" style="font-size: 12.5px;">script</a> <a href="/tags/scripting/" style="font-size: 10px;">scripting</a> <a href="/tags/server/" style="font-size: 10px;">server</a> <a href="/tags/simulator/" style="font-size: 12.5px;">simulator</a> <a href="/tags/snmp/" style="font-size: 12.5px;">snmp</a> <a href="/tags/snmpsim/" style="font-size: 12.5px;">snmpsim</a> <a href="/tags/switch/" style="font-size: 12.5px;">switch</a> <a href="/tags/syslog/" style="font-size: 10px;">syslog</a> <a href="/tags/thread-safe/" style="font-size: 10px;">thread-safe</a> <a href="/tags/%D0%A2%D0%BE%D0%BC%D0%B0%D1%81/" style="font-size: 10px;">Томас</a> <a href="/tags/%D0%A5%D0%B0%D0%BD%D1%82/" style="font-size: 10px;">Хант</a> <a href="/tags/%D0%B1%D0%BB%D0%BE%D0%B3/" style="font-size: 10px;">блог</a> <a href="/tags/%D0%B4%D0%BE%D0%BA%D0%B5%D1%80/" style="font-size: 10px;">докер</a> <a href="/tags/%D0%BF%D1%80%D0%B8%D0%BD%D1%82%D0%B5%D1%80/" style="font-size: 12.5px;">принтер</a> <a href="/tags/%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%81%D1%82-%D0%BF%D1%80%D0%B0%D0%B3%D0%BC%D0%B0%D1%82%D0%B8%D0%BA/" style="font-size: 10px;">программист-прагматик</a> <a href="/tags/%D1%81%D0%B8%D0%BC%D1%83%D0%BB%D1%8F%D1%82%D0%BE%D1%80/" style="font-size: 12.5px;">симулятор</a> <a href="/tags/%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5%D0%B1%D0%BB%D0%BE%D0%B3%D0%B0/" style="font-size: 10px;">созданиеблога</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Архив</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">июнь 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">апрель 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">декабрь 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">апрель 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">март 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">февраль 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">декабрь 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">ноябрь 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">октябрь 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">сентябрь 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">август 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">июль 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">июнь 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Недавние записи</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/06/27/nuget-cache-clearing/">Очистка кэша NuGet пакетов</a>
          </li>
        
          <li>
            <a href="/2023/06/25/select-problem-ngx-translate-angular/">Об одной проблеме работы ngx-translate при первоначальной загрузке сайта на Angular</a>
          </li>
        
          <li>
            <a href="/2023/04/13/contains-is-deprecated-in-efcore6/">Метод Contains больше не поддерживается в EF Core 6</a>
          </li>
        
          <li>
            <a href="/2022/12/21/required-query-string-in-aspnet-core/">Обязательный QueryString параметр в ASP.NET Core</a>
          </li>
        
          <li>
            <a href="/2022/12/21/restore-db-postgres/">Как восстановить базу данных из файла бэкапа в PostgreSQL</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 Artem Ostashchenko<br>
      Создано с помощью <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a target="_blank" rel="noopener" href="https://github.com/ostart/Skills" class="mobile-nav-link">My Skills</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>