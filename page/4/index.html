<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Artemio&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Artemio&#39;s Blog">
<meta property="og:url" content="https://ostart.github.io/page/4/index.html">
<meta property="og:site_name" content="Artemio&#39;s Blog">
<meta property="og:locale" content="ru_RU">
<meta property="article:author" content="Artem Ostashchenko">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Artemio's Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Artemio&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Hi, I&#39;m Artem Ostashchenko, a software developer. I write this blog in Russian</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" target="_blank" rel="noopener" href="https://github.com/ostart/Skills">My Skills</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS-каналы"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Поиск"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Поиск"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://ostart.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-concurrency-with-httpclient" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/08/22/concurrency-with-httpclient/" class="article-date">
  <time class="dt-published" datetime="2021-08-22T05:23:44.000Z" itemprop="datePublished">22-08-2021</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/08/22/concurrency-with-httpclient/">Особенности потоко-безопасного использования класса HttpClient при отправке Http Headers</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Разрабатывая Windows-службу, работающую с МФУ и принтерами по HTTP, я использовал класс HttpClient. Данный класс является потоко-безопасным и не требует создания многочисленных экземпляров: достаточно один раз создать HttpClient, чтобы он обсужил все требующиеся запросы (в том числе многопоточные):</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> HttpClient Client = <span class="keyword">new</span> HttpClient();</span><br></pre></td></tr></table></figure>

<p>или если не требуется, чтобы использовались Cookies:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> HttpClient Client = <span class="keyword">new</span> HttpClient(<span class="keyword">new</span> HttpClientHandler &#123; UseCookies = <span class="literal">false</span> &#125;);</span><br></pre></td></tr></table></figure>

<p>Данный подход избавит от проблемной утилизации (Dispose) экземпляров HttpClient и потенциального исчерпания свободных портов в системе (port exhausting), связанного с проблемной утилизацией.</p>
<p>Всё бы хорошо, но мною была обнаружена <strong>проблема разделяемого общего состояния эксземпляра класса HttpClient</strong>, когда мне потребовалось кроме сообщений ещё и <strong>отправлять Http Headers с аутентификацией</strong> и служебной информацией.</p>
<p>Оказалось, что мною используемый подход:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Client.DefaultRequestHeaders.Clear(); <span class="comment">// doesn&#x27;t work for concurrency</span></span><br><span class="line">Client.DefaultRequestHeaders.Add(<span class="string">&quot;Authorization&quot;</span>, token); <span class="comment">// doesn&#x27;t work for concurrency</span></span><br><span class="line"><span class="keyword">var</span> response = <span class="keyword">await</span> Client.GetAsync(requestUri);</span><br><span class="line">response.EnsureSuccessStatusCode();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> result = <span class="keyword">await</span> response.Content.ReadAsStringAsync();</span><br><span class="line"><span class="keyword">return</span> JsonConvert.DeserializeObject&lt;UserProfile&gt;(result);</span><br></pre></td></tr></table></figure>

<p>некореектно работает в многопоточной среде, т.к. имеет разделяемое общее состояние хэдеров Http Headers. </p>
<p>Исследование проблемы натолкнуло меня на отличную статью с решением данной проблемы: <a target="_blank" rel="noopener" href="https://www.thinkprogramming.co.uk/concurrency-with-httpclient/">Concurrency with HttpClient</a></p>
<p>Решение заключается в отказе от внутреннего разделяемого общего состояния HttpClient’а, а именно от Default Header. Следует дописать метод расширения, который делает то же самое, что и вышеобозначенный код, но без разделяемого общего состояния:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title">HttpClientExtensions</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">async</span> Task&lt;HttpResponseMessage&gt; <span class="title">GetAsyncExt</span>(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="keyword">this</span> HttpClient @<span class="keyword">this</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="built_in">string</span> url,</span></span></span><br><span class="line"><span class="params"><span class="function">        Action&lt;HttpRequestHeaders&gt; beforeRequest</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> request = <span class="keyword">new</span> HttpRequestMessage(HttpMethod.Get, url);</span><br><span class="line">        beforeRequest(request.Headers);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">await</span> @this.SendAsync(request);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">async</span> Task&lt;HttpResponseMessage&gt; <span class="title">PostAsyncExt</span>(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="keyword">this</span> HttpClient @<span class="keyword">this</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="built_in">string</span> url,</span></span></span><br><span class="line"><span class="params"><span class="function">        HttpContent content,</span></span></span><br><span class="line"><span class="params"><span class="function">        Action&lt;HttpRequestHeaders&gt; beforeRequest</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> request = <span class="keyword">new</span> HttpRequestMessage(HttpMethod.Post, url);</span><br><span class="line">        beforeRequest(request.Headers);</span><br><span class="line">        request.Content = content;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">await</span> @this.SendAsync(request);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Теперь вызовы из кода HttpClient с передачей хэдеров Http Headers выглядят так и являются потоко-безопасными:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> response = <span class="keyword">await</span> Client.GetAsyncExt(requestUri, h =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    h.Add(<span class="string">&quot;Authorization&quot;</span>, token);</span><br><span class="line">&#125;);</span><br><span class="line">response.EnsureSuccessStatusCode();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> result = <span class="keyword">await</span> response.Content.ReadAsStringAsync();</span><br><span class="line"><span class="keyword">return</span> JsonConvert.DeserializeObject&lt;UserProfile&gt;(result);</span><br></pre></td></tr></table></figure>



      
    </div>
    <footer class="article-footer">
      <a data-url="https://ostart.github.io/2021/08/22/concurrency-with-httpclient/" data-id="cl206b7ge00088ovs77ag6do2" data-title="Особенности потоко-безопасного использования класса HttpClient при отправке Http Headers" class="article-share-link">Поделиться</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C#</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DefaultRequestHeaders/" rel="tag">DefaultRequestHeaders</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Headers/" rel="tag">Headers</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HttpClient/" rel="tag">HttpClient</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/concurrency/" rel="tag">concurrency</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/thread-safe/" rel="tag">thread-safe</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-simple-snmp-server" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/08/12/simple-snmp-server/" class="article-date">
  <time class="dt-published" datetime="2021-08-12T12:22:45.000Z" itemprop="datePublished">12-08-2021</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/08/12/simple-snmp-server/">Простой SNMP сервер на C#</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Простой SNMP сервер непрерывно слушает порт (161 для симулятора МФУ) и проверяет присутствие пришедшей по UDP команды OID в словаре dictionary. В качестве ключа dictionary содержит OID команду, а в качестве значения - ответ МФУ на неё. Словарь dictionary формируется при инициализации приложения из appSettings.json. При наличии ключа отправляется ответ отправителю запроса. </p>
<p>Обратите внимание на метод <em>string ConvertBytesToStringOid(byte[] oidBytes)</em>, преобразующий пришедшие байты OID команды в текстовое значение к которому мы привыкли (вида 1.3.6.1.2.1.43.5.1.1.17.1). Именно оно используется для поиска в словаре dictionary.</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title">SnmpServer</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">StartListening</span>(<span class="params">Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt; dictionary, <span class="built_in">int</span> port</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">var</span> receiver = <span class="keyword">new</span> UdpClient(port); <span class="comment">// UdpClient для получения данных</span></span><br><span class="line">            IPEndPoint remoteIp = <span class="literal">null</span>; <span class="comment">// адрес входящего подключения</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">var</span> data = receiver.Receive(<span class="keyword">ref</span> remoteIp); <span class="comment">// получаем данные</span></span><br><span class="line">                    <span class="built_in">int</span> requestIdBytesLength = data[<span class="number">16</span>];</span><br><span class="line">                    <span class="keyword">var</span> requestIdBytes = <span class="keyword">new</span> <span class="built_in">byte</span>[requestIdBytesLength];</span><br><span class="line">                    Buffer.BlockCopy(data, <span class="number">17</span>, requestIdBytes, <span class="number">0</span>, requestIdBytesLength);</span><br><span class="line">                    <span class="built_in">int</span> inputOidLength = data[<span class="number">32</span>];</span><br><span class="line">                    <span class="keyword">var</span> inputOidBytes = <span class="keyword">new</span> <span class="built_in">byte</span>[inputOidLength];</span><br><span class="line">                    Buffer.BlockCopy(data, <span class="number">33</span>, inputOidBytes, <span class="number">0</span>, inputOidLength);</span><br><span class="line">                    <span class="keyword">var</span> inputOid = ConvertBytesToStringOid(inputOidBytes);</span><br><span class="line">                    <span class="keyword">if</span> (dictionary.TryGetValue(inputOid, <span class="keyword">out</span> <span class="keyword">var</span> oidValue))</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">var</span> sender = <span class="keyword">new</span> UdpClient(remoteIp.Address.ToString(), remoteIp.Port);</span><br><span class="line">                        <span class="keyword">var</span> oidValueBytes = Encoding.ASCII.GetBytes(oidValue);</span><br><span class="line">                        <span class="keyword">var</span> response = GenerateOidBytesResponse(</span><br><span class="line">                            requestIdBytes, </span><br><span class="line">                            inputOidBytes, </span><br><span class="line">                            oidValueBytes</span><br><span class="line">                        );</span><br><span class="line">                        sender.Send(response, response.Length); <span class="comment">// отправка</span></span><br><span class="line">                        sender.Close();</span><br><span class="line">                        sender.Dispose();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            catch (Exception)</span><br><span class="line">            &#123;</span><br><span class="line">                receiver.Close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">byte</span>[] <span class="title">GenerateOidBytesResponse</span>(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="built_in">byte</span>[] requestIdBytes, </span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="built_in">byte</span>[] inputOidBytes, </span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="built_in">byte</span>[] oidValueBytes</span></span></span><br><span class="line"><span class="params"><span class="function">    </span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> result1 = <span class="keyword">new</span> List&lt;<span class="built_in">byte</span>&gt;(oidValueBytes);</span><br><span class="line">        result1.Insert(<span class="number">0</span>, (<span class="built_in">byte</span>)oidValueBytes.Length);</span><br><span class="line">        result1.Insert(<span class="number">0</span>, <span class="number">0x04</span>);</span><br><span class="line">        <span class="keyword">var</span> result2 = <span class="keyword">new</span> List&lt;<span class="built_in">byte</span>&gt;(inputOidBytes);</span><br><span class="line">        result2.AddRange(result1);</span><br><span class="line">        result2.Insert(<span class="number">0</span>, (<span class="built_in">byte</span>)inputOidBytes.Length);</span><br><span class="line">        result2.Insert(<span class="number">0</span>, <span class="number">0x06</span>);</span><br><span class="line">        result2.Insert(<span class="number">0</span>, (<span class="built_in">byte</span>)result2.Count);</span><br><span class="line">        result2.Insert(<span class="number">0</span>, <span class="number">0x30</span>);</span><br><span class="line">        result2.Insert(<span class="number">0</span>, (<span class="built_in">byte</span>)result2.Count);</span><br><span class="line">        result2.Insert(<span class="number">0</span>, <span class="number">0x30</span>);</span><br><span class="line">        </span><br><span class="line">        Magic210(result2);</span><br><span class="line">        Magic210(result2);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> result3 = <span class="keyword">new</span> List&lt;<span class="built_in">byte</span>&gt;(requestIdBytes);</span><br><span class="line">        result3.AddRange(result2);</span><br><span class="line">        result3.Insert(<span class="number">0</span>, (<span class="built_in">byte</span>)requestIdBytes.Length);</span><br><span class="line">        result3.Insert(<span class="number">0</span>, <span class="number">0x02</span>);</span><br><span class="line">        result3.Insert(<span class="number">0</span>, (<span class="built_in">byte</span>)result3.Count);</span><br><span class="line">        result3.Insert(<span class="number">0</span>, <span class="number">0xa2</span>);</span><br><span class="line"></span><br><span class="line">        CommunityPublic(result3);</span><br><span class="line">        Magic210(result3);</span><br><span class="line">        </span><br><span class="line">        result3.Insert(<span class="number">0</span>, (<span class="built_in">byte</span>)result3.Count);</span><br><span class="line">        result3.Insert(<span class="number">0</span>, <span class="number">0x30</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result3.ToArray();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">CommunityPublic</span>(<span class="params">List&lt;<span class="built_in">byte</span>&gt; list</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        list.Insert(<span class="number">0</span>, <span class="number">0x63</span>);</span><br><span class="line">        list.Insert(<span class="number">0</span>, <span class="number">0x69</span>);</span><br><span class="line">        list.Insert(<span class="number">0</span>, <span class="number">0x6c</span>);</span><br><span class="line">        list.Insert(<span class="number">0</span>, <span class="number">0x62</span>);</span><br><span class="line">        list.Insert(<span class="number">0</span>, <span class="number">0x75</span>);</span><br><span class="line">        list.Insert(<span class="number">0</span>, <span class="number">0x70</span>);</span><br><span class="line">        list.Insert(<span class="number">0</span>, <span class="number">0x06</span>);</span><br><span class="line">        list.Insert(<span class="number">0</span>, <span class="number">0x04</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Magic210</span>(<span class="params">List&lt;<span class="built_in">byte</span>&gt; list</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        list.Insert(<span class="number">0</span>, <span class="number">0x00</span>);</span><br><span class="line">        list.Insert(<span class="number">0</span>, <span class="number">0x01</span>);</span><br><span class="line">        list.Insert(<span class="number">0</span>, <span class="number">0x02</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">string</span> <span class="title">ConvertBytesToStringOid</span>(<span class="params"><span class="built_in">byte</span>[] oidBytes</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> builder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">var</span> result = <span class="keyword">new</span> List&lt;<span class="built_in">uint</span>&gt; &#123; (<span class="built_in">uint</span>)(oidBytes[<span class="number">0</span>] / <span class="number">40</span>), (<span class="built_in">uint</span>)(oidBytes[<span class="number">0</span>] % <span class="number">40</span>) &#125;;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">uint</span> buffer = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; oidBytes.Length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> ((oidBytes[i] &amp; <span class="number">0x80</span>) == <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                result.Add(oidBytes[i] + (buffer &lt;&lt; <span class="number">7</span>));</span><br><span class="line">                buffer = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                buffer &lt;&lt;= <span class="number">7</span>;</span><br><span class="line">                buffer += (<span class="built_in">uint</span>)(oidBytes[i] &amp; <span class="number">0x7F</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; result.Count; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            builder.Append(result[i]);</span><br><span class="line">            <span class="keyword">if</span> (i != result.Count - <span class="number">1</span>) builder.Append(<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> builder.ToString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://ostart.github.io/2021/08/12/simple-snmp-server/" data-id="cl206b7h7001k8ovs3mm4dvkz" data-title="Простой SNMP сервер на C#" class="article-share-link">Поделиться</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C#</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SNMP/" rel="tag">SNMP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/server/" rel="tag">server</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-snmp-response-structure" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/08/12/snmp-response-structure/" class="article-date">
  <time class="dt-published" datetime="2021-08-12T11:36:55.000Z" itemprop="datePublished">12-08-2021</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/08/12/snmp-response-structure/">Структура SNMP ответа get-response</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Давайте взглянем на структуру SNMP ответа get-response с помощью Wireshark:</p>
<img src="/2021/08/12/snmp-response-structure/get-response.jpg" class="" title="Структура SNMP ответа get-response (Wireshark)">

<p>Пакет начинается с байта 0x30 и содержит в нашем примере всего 59 байтов. Второй байт 0x39 показывает длину последующего массива отправляемых байтов (0x39<sub>16</sub> = 57<sub>10</sub>). Пятый байт 0x00 показывает номер версии version-1, за которым следует указатель community и байт его длины 0x06 (6 байт). Значение community начинается в нашем случае с 8-го байта и идёт до 13 байта включительно (0x70 0x75 0x62 0x6C 0x69 0x63). Дальше следуют байты данных самого get-response: открывающий байт 0xA2, длина последующих байтов 0x2C (44 байта), открывающий байт идентификатора запроса 0x02 и длина request-id 0x04. Значение request-id начинается с 18 байта и идёт в нашем случае до 21 байта (0x0B 0x5E 0xA0 0x42), что составляет значение 190750786. Величина request-id соответствует величине request-id пришедшего в SNMP запросе get-request. Далее 24-м байтом идёт error-status, 27-м байтом идёт error-index, а 28-м байтом идёт открывающий байт 0x30 и длина последующих байтов 0x1E (30 байтов). 30-м байтом идёт открывающий байт 0x30 и длина последующих байтов 0x1С (28 байтов). Затем опять повторяется OID, пришедший в запросе get-request, а именно байт длины 0x0B (11 байтов) и их значение: 0x2B 0x06 0x01 0x02 0x01 0x2B 0x05 0x01 0x01 0x11 0x01, что составляет значение 1.3.6.1.2.1.43.5.1.1.17.1. Далее 45-м байтом идёт байт 0x04, что означает что далее последует значение в OctetString и 46-м байтом следует длина последующего значения 0x0D (13 байтов): 0x41 0x37 0x39 0x38 0x30 0x32 0x37 0x35 0x34 0x31 0x32 0x34 0x36, что является серийным номером МФУ А798027541246.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ostart.github.io/2021/08/12/snmp-response-structure/" data-id="cl206b7h9001p8ovs6qt76c89" data-title="Структура SNMP ответа get-response" class="article-share-link">Поделиться</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SNMP/" rel="tag">SNMP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/get-response/" rel="tag">get-response</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-snmp-request-structure" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/08/12/snmp-request-structure/" class="article-date">
  <time class="dt-published" datetime="2021-08-12T10:07:11.000Z" itemprop="datePublished">12-08-2021</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/08/12/snmp-request-structure/">Структура SNMP запроса get-request</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Давайте взглянем на структуру SNMP запроса get-request с помощью Wireshark:</p>
<img src="/2021/08/12/snmp-request-structure/get-request.jpg" class="" title="Структура SNMP запроса get-request (Wireshark)">

<p>Пакет начинается с байта 0x30 и содержит в нашем примере всего 46 байтов. Второй байт 0x2C показывает длину последующего массива пришедших байтов (0x2C<sub>16</sub> = 44<sub>10</sub>). Пятый байт 0x00 показывает номер версии version-1, за которым следует указатель community и байт его длины 0x06 (6 байт). Значение community начинается в нашем случае с 8-го байта и идёт до 13 байта включительно (0x70 0x75 0x62 0x6C 0x69 0x63). Дальше следуют байты данных самого get-request: открывающий байт 0xA0, длина последующих байтов 0x1F (31 байт), открывающий байт идентификатора запроса 0x02 и длина request-id 0x04. Значение request-id начинается с 18 байта и идёт в нашем случае до 21 байта (0x0B 0x5E 0xA0 0x42), что составляет значение 190750786. Аналогичная величина request-id должна присутствовать в SNMP ответе get-response. Далее 24-м байтом идёт error-status, 27-м байтом идёт error-index, а 33-м байтом идёт длина переданного OID 0x0B (11 байтов): 0x2B 0x06 0x01 0x02 0x01 0x2B 0x05 0x01 0x01 0x11 0x01, что составляет значение 1.3.6.1.2.1.43.5.1.1.17.1. Именно на это значение OID отвечает устройство в ответ. Алгоритм того, как одиннадцать вышеперечисленных байтов превращаются в вышеуказанный OID можно найти в статье <a href="https://ostart.github.io/2021/08/12/simple-snmp-server/">Простой SNMP сервер на C#</a>. SNMP пакет завершается байтами 0x05 0x00.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ostart.github.io/2021/08/12/snmp-request-structure/" data-id="cl206b7h8001m8ovsdwcwepwl" data-title="Структура SNMP запроса get-request" class="article-share-link">Поделиться</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SNMP/" rel="tag">SNMP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/get-request/" rel="tag">get-request</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-pragmatic-programmer" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/08/03/pragmatic-programmer/" class="article-date">
  <time class="dt-published" datetime="2021-08-03T12:17:04.000Z" itemprop="datePublished">03-08-2021</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/08/03/pragmatic-programmer/">О книге &#34;Программист-прагматик&#34; Дэвида Томаса и Эндрю Ханта</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Традиционно книга Дэвида Томаса и Эндрю Ханта “Программист-прагматик. Ваш путь к мастерству” (David Thomas, Andrew Hunt - The Pragmatic Programmer) относится к разряду MUST HAVE/READ и не спроста. Колоссальный опыт авторов с великолепным стилем изложения материала (советы, задачи и упражнения) делают данную книгу столько важной в карьере разработчика. Не могу сказать, что прочёл книгу на одном дыхании. Некоторые темы давались труднее других и требовали времени на переваривание. Могу рекомендовать данную книгу как новичкам, так и опытным программистам - все смогут найти полезное в ней по своему уровню. </p>
<p>Также хотел отметить, что авторы не просто сконцентрировались на коде, но и на многих аспектах жизни разработчика, включая нравственные вопросы: кто будет пользоваться данным кодом и приближает ли ваш код наш мир к тому образу будущего, который бы вы хотели видеть? (У вас же есть такой образ, правда?)</p>
<p>Хотел бы вкратце резюмировать советы авторов, которые раскрываются примерами в основном содержимом книги:</p>
<ol>
<li>Заботьтесь о своем ремесле</li>
<li>Думайте о своей работе</li>
<li>У вас есть свобода выбора</li>
<li>Предлагайте варианты разрешения затруднений, а не оправдания и извинения</li>
<li>Нельзя жить с разбитыми окнами</li>
<li>Будьте катализатором перемен</li>
<li>Не забывайте об общей картине</li>
<li>Включайте в требования к системе вопрос о её качестве</li>
<li>Регулярно инвестируйте в свой багаж знаний</li>
<li>Критически анализируйте то, что вы читаете и слышите</li>
<li>Родной язык - это просто ещё один язык программирования</li>
<li>Важно не только то, что вы говорите, но и как вы это говорите</li>
<li>Создавая документацию, не фиксируйте её навечно</li>
<li>Удачное проектное решение легче изменить, чем неудачное</li>
<li>DRY - Don’t Repeat Yourself (не повторяйся)</li>
<li>Упрощайте повторное использование исходного кода</li>
<li>Исключайте взаимное влияние несвязанных компонентов системы</li>
<li>Окончательных решений не существует</li>
<li>Остерегайтесь увлекаться новомодными веяниями</li>
<li>Пользуйтесь методом трассирующих пуль для отыскания целей</li>
<li>Создавайте прототипы для обучения</li>
<li>Программируйте близко к предметной области</li>
<li>Выполняйте оценку, чтобы исключить неожиданности</li>
<li>Повторно уточняйте график выполнения работ по мере написания кода</li>
<li>Храните свои знания в виде простого текста</li>
<li>Используйте всю мощь командных оболочек</li>
<li>Стремитесь свободно владеть редактором</li>
<li>Всегда пользуйтесь системой контроля версий</li>
<li>Устраните затруднение, а не вините в нём других</li>
<li>Не паникуй!</li>
<li>Вылавливающий ошибку тест должен предшествовать её исправлению</li>
<li>Внимательно читайте сообщения об ошибке, каким бы отвратительным оно ни было</li>
<li>Системный вызов <strong>select</strong> работает нормально</li>
<li>Не предполагайте, а доказывайте</li>
<li>Изучите язык манипулирования текстом</li>
<li>Написать идеальную программу нельзя</li>
<li>Проектируйте по контракту</li>
<li>Пользуйтесь досрочным аварийным завершением программы</li>
<li>Пользуйтесь утверждениями, чтобы предотвратить невозможное</li>
<li>Завершайте то, что начали</li>
<li>Действуйте локально</li>
<li>Всегда предпринимайте небольшие шаги</li>
<li>Избегайте предсказания будущего</li>
<li>Развязанный код проще изменить</li>
<li>Указывай, а не спрашивай</li>
<li>Не связывайте вызовы методов в цепочку</li>
<li>Избегайте глобальных данных</li>
<li>Если данные настолько важны, чтобы быть глобальными, заключите их в оболочку API</li>
<li>Программирование имеет отношение к коду, а программы - к данным</li>
<li>Не накапливайте состояние, а передавайте его по кругу</li>
<li>Не платите налог на наследование</li>
<li>Выражать полиморфизм предпочтительнее с помощью интерфейсов</li>
<li>Делегируйте полномочия службам: отношение СОДЕРЖИТ превосходит отношение ЯВЛЯЕТСЯ</li>
<li>Пользуйтесь миксинами для совместного использования функциональных возможностей</li>
<li>Параметризуйте своё приложение, используя внешнюю конфигурацию</li>
<li>Анализируйте последовательность выполняемых действий с целью повышения параллельности</li>
<li>Общее состояние - неверное состояние</li>
<li>Случайные отказы часто вызваны осложнениями, возникающими в связи с параллельностью</li>
<li>Пользуйтесь акторами, чтобы достичь параллельности без общего состояния</li>
<li>Пользуйтесь классными досками для координации потока выполнения</li>
<li>Прислушивайтесь к своим внутренним чувствам</li>
<li>Не программируйте по совпадению</li>
<li>Оценивайте порядок производительности своих алгоритмов</li>
<li>Проверяйте свои оценки</li>
<li>Выполняйте рефакторинг кода как можно раньше и чаще</li>
<li>Тестирование предназначено не для выявления программных ошибок</li>
<li>Тест - первый пользователь вашего кода</li>
<li>Стройте комплексно, а не сверху вниз или снизу вверх</li>
<li>Проектируйте с учетом тестирования</li>
<li>Тестируйте свои программы сами, иначе их будут тестировать пользователи</li>
<li>Пользуйтесь тестами на основе свойств для проверки правильности ваших предположений</li>
<li>Не усложняйте код и минимизируйте поверхность атак</li>
<li>Устанавливайте обновления системы безопасности незамедлительно</li>
<li>Именуйте правильно; а по мере надобности переименовывайте</li>
<li>Никто точно не знает, чего он хочет</li>
<li>Программисты помогают людям понять, чего они хотят на самом деле</li>
<li>Требования изучаются с помощью обратной связи</li>
<li>Работайте с пользователем, чтобы мыслить как пользователь</li>
<li>Бизнес-правила - это метаданные</li>
<li>Пользуйтесь словарем терминов проекта</li>
<li>Вместо того, чтобы мыслить нешаблонно, <em>находите</em> шаблон</li>
<li>Не вникайте в исходный код в одиночку</li>
<li>Гибкость - это не существительное, а порядок выполнения действий</li>
<li>Поддерживайте небольшие, устойчивые команды</li>
<li>Планируйте и воплощайте в жизнь пополнение багажа знаний</li>
<li>Организовывайте полнофункциональные команды</li>
<li>Делайте то, что пригодно, а не то, что модно</li>
<li>Выпускайте программное обеспечение, когда оно требуется пользователям</li>
<li>Пользуйтесь контролем версий, чтобы проводить сборки, тесты и выпуски</li>
<li>Текстируйте как можно раньше, чаще и автоматически</li>
<li>Программирование нельзя считать завершенным до тех пор, пока не пройдут все тесты</li>
<li>Пользуйтесь саботажем для проверки своих тестов</li>
<li>Проверяйте покрытие тестами состояний, а не исходного кода</li>
<li>Обнаруживайте ошибки единожды</li>
<li>Не пользуйтесь ручными процедурами</li>
<li>Доставляйте пользователям не просто код, а удовольствие</li>
<li>Подписывайте свою работу</li>
<li>Прежде всего, не нанесите вред</li>
<li>Не потакайте всякой шушере</li>
<li>Это ваша жизнь. Делитесь ею, празднуйте и стройте её. И ЖЕЛАЕМ ПОЛУЧИТЬ ОТ ЭТОГО УДОВОЛЬСТВИЕ!</li>
</ol>
<p>Некоторые советы кажутся очевидными, некоторые - интригующе-непонятными, но будучи вырванными из контекста они мало что дают для понимания без прочтения самой книги. Прочтите - не пожалеете!</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ostart.github.io/2021/08/03/pragmatic-programmer/" data-id="cl206b7gx00178ovs5cdi45b9" data-title="О книге &#34;Программист-прагматик&#34; Дэвида Томаса и Эндрю Ханта" class="article-share-link">Поделиться</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/pragmatic-programmer/" rel="tag">pragmatic-programmer</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%D0%A2%D0%BE%D0%BC%D0%B0%D1%81/" rel="tag">Томас</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%D0%A5%D0%B0%D0%BD%D1%82/" rel="tag">Хант</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%81%D1%82-%D0%BF%D1%80%D0%B0%D0%B3%D0%BC%D0%B0%D1%82%D0%B8%D0%BA/" rel="tag">программист-прагматик</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-venis-IX" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/07/23/venis-IX/" class="article-date">
  <time class="dt-published" datetime="2021-07-23T08:34:07.000Z" itemprop="datePublished">23-07-2021</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/07/23/venis-IX/">Работа с NSIS скриптами в Venis_IX</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Для редактирования и компиляции NSIS скриптов есть замечательная программа <a target="_blank" rel="noopener" href="https://nsis.sourceforge.io/Venis_IX">Venis_IX</a>.</p>
<img src="/2021/07/23/venis-IX/venis1.jpg" class="" title="Venis Main Window">

<p>Для шаблонной генерации скрипта установщика в программе присутствует Venis Install Wizard:</p>
<img src="/2021/07/23/venis-IX/venis2.jpg" class="" title="Venis Install Wizard">

<p>В основном окне можно создать / открыть скрипт (расширение .nsi), отредактировать его и откомпилировать. Результат компиляции отображается в консольном окне Compile Results. В случае успеха будет показан конечный размер установщика (Total size:) в байтах, как показано на изображении ниже:</p>
<img src="/2021/07/23/venis-IX/venis3.jpg" class="" title="Venis Compile Results">

<p>В случае ошибки в консоли будет указана причина и строка на которой ошибка случилась.</p>
<img src="/2021/07/23/venis-IX/venis4.jpg" class="" title="Venis Compile Error">

<p>К сожалению в программе нет привычного разработчикам дебаггера, поэтому отладка скрипта, как правило, осуществляется при его выполнении через всплывающие окна MessageBox или вывод в консоль с помощью DetailPrint.</p>
<p>Также в программе есть великолепная и подробная справка по языку, командам и макросам NSIS (NSIS User Manual):</p>
<img src="/2021/07/23/venis-IX/venis5.jpg" class="" title="Venis NSIS Help">
<p>&nbsp;</p>
<img src="/2021/07/23/venis-IX/venis6.jpg" class="" title="Venis NSIS User Manual">


      
    </div>
    <footer class="article-footer">
      <a data-url="https://ostart.github.io/2021/07/23/venis-IX/" data-id="cl206b7it006z8ovseuqg8kep" data-title="Работа с NSIS скриптами в Venis_IX" class="article-share-link">Поделиться</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NSIS/" rel="tag">NSIS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Venis-IX/" rel="tag">Venis_IX</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nsis/" rel="tag">nsis</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/script/" rel="tag">script</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-nsis-scripting" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/07/18/nsis-scripting/" class="article-date">
  <time class="dt-published" datetime="2021-07-18T10:02:25.000Z" itemprop="datePublished">18-07-2021</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/07/18/nsis-scripting/">Введение в синтаксис NSIS скриптов</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="Типичный-скрипт-NSIS-состоит-из"><a href="#Типичный-скрипт-NSIS-состоит-из" class="headerlink" title="Типичный скрипт NSIS состоит из:"></a>Типичный скрипт NSIS состоит из:</h3><ul>
<li><p>Глобальных переменных (Var nameServer)</p>
</li>
<li><p>Стэка</p>
</li>
<li><p>Регистров ($0-$9,$R0-$R9)</p>
</li>
<li><p>Встроенных функций (StrCmp, IntCmp, IfErrors, Goto …)</p>
<figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">StrCmp</span> <span class="variable">$0</span> <span class="string">&#x27;some value&#x27;</span> <span class="number">0</span> +<span class="number">3</span></span><br><span class="line">  <span class="keyword">MessageBox</span> <span class="params">MB_OK</span> <span class="string">&#x27;<span class="meta">$$</span>0 is some value&#x27;</span></span><br><span class="line">  <span class="keyword">Goto</span> done</span><br><span class="line"><span class="keyword">StrCmp</span> <span class="variable">$0</span> <span class="string">&#x27;some other value&#x27;</span> <span class="number">0</span> +<span class="number">3</span></span><br><span class="line">  <span class="keyword">MessageBox</span> <span class="params">MB_OK</span> <span class="string">&#x27;<span class="meta">$$</span>0 is some other value&#x27;</span></span><br><span class="line">  <span class="keyword">Goto</span> done</span><br><span class="line"><span class="comment"># else</span></span><br><span class="line">  <span class="keyword">MessageBox</span> <span class="params">MB_OK</span> <span class="string">&#x27;<span class="meta">$$</span>0 is &quot;<span class="variable">$0</span>&quot;&#x27;</span></span><br><span class="line">done:</span><br></pre></td></tr></table></figure></li>
<li><p>удобной библиотеки LogicLib, превращающей логические операции встроенных функций в некое подобие высокоуровневой библиотеки</p>
<figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$&#123;If&#125;</span> <span class="variable">$0</span> == <span class="string">&#x27;some value&#x27;</span></span><br><span class="line">  <span class="keyword">MessageBox</span> <span class="params">MB_OK</span> <span class="string">&#x27;<span class="meta">$$</span>0 is some value&#x27;</span></span><br><span class="line"><span class="variable">$&#123;ElseIf&#125;</span> <span class="variable">$0</span> == <span class="string">&#x27;some other value&#x27;</span></span><br><span class="line">  <span class="keyword">MessageBox</span> <span class="params">MB_OK</span> <span class="string">&#x27;<span class="meta">$$</span>0 is some other value&#x27;</span></span><br><span class="line"><span class="variable">$&#123;Else&#125;</span></span><br><span class="line">  <span class="keyword">MessageBox</span> <span class="params">MB_OK</span> <span class="string">&#x27;<span class="meta">$$</span>0 is &quot;<span class="variable">$0</span>&quot;&#x27;</span></span><br><span class="line"><span class="variable">$&#123;EndIf&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$&#123;Switch&#125;</span>, <span class="variable">$&#123;If&#125;</span>, <span class="variable">$&#123;While&#125;</span>, <span class="variable">$&#123;For&#125;</span> etc.</span><br></pre></td></tr></table></figure></li>
<li><p>Комментариев  ; # /**/ </p>
</li>
<li><p>Переноса на следующую строку   \</p>
</li>
<li><p>Объявления и использования переменных</p>
<figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Var</span> BLA <span class="comment">;Declare the variable</span></span><br><span class="line"><span class="keyword">StrCpy</span> <span class="variable">$BLA</span> <span class="string">&quot;123&quot;</span> <span class="comment">;Now you can use the variable $BLA</span></span><br></pre></td></tr></table></figure></li>
<li><p>Подключения внешних скриптов </p>
<figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">!include</span> LogicLib.nsh</span><br></pre></td></tr></table></figure></li>
<li><p>Определения констант </p>
<figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">!define</span> APPNAME <span class="string">&quot;Installer“</span></span><br></pre></td></tr></table></figure></li>
<li><p>Ветвления</p>
<figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$&#123;If&#125;</span> <span class="variable">$Dialog</span> == error</span><br><span class="line">	<span class="keyword">Abort</span></span><br><span class="line"><span class="variable">$&#123;EndIf&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$&#123;IfNot&#125;</span> <span class="variable">$&#123;Silent&#125;</span></span><br><span class="line"><span class="variable">$&#123;AndIf&#125;</span> <span class="variable">$&#123;SectionIsSelected&#125;</span> <span class="variable">$&#123;SectionAgent&#125;</span></span><br><span class="line">	...code...</span><br><span class="line"><span class="variable">$&#123;EndIf&#125;</span></span><br></pre></td></tr></table></figure></li>
<li><p>Функций</p>
<figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">Function</span> bla</span></span><br><span class="line">  <span class="keyword">Push</span> <span class="variable">$R0</span></span><br><span class="line">  <span class="keyword">Push</span> <span class="variable">$R1</span></span><br><span class="line">    ...code...</span><br><span class="line">  <span class="keyword">Pop</span> <span class="variable">$R1</span></span><br><span class="line">  <span class="keyword">Pop</span> <span class="variable">$R0</span></span><br><span class="line">FunctionEnd</span><br><span class="line"></span><br><span class="line"><span class="keyword">Call</span> bla  <span class="comment">;call the function. Arguments pass by stack</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">Function</span> un.bla</span></span><br><span class="line">  ...code...</span><br><span class="line">FunctionEnd</span><br></pre></td></tr></table></figure></li>
<li><p>Макросов</p>
<figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">!macro</span> LogDetailPrintMessageBox message</span><br><span class="line">	<span class="keyword">!insertmacro</span> GetTimeStampString <span class="variable">$R9</span></span><br><span class="line">	<span class="class">nsislog::log</span> <span class="string">&quot;<span class="variable">$EXEDIR</span>\<span class="variable">$&#123;LOGFILE&#125;</span>&quot;</span> <span class="string">&quot;<span class="variable">$R9</span>: <span class="variable">$&#123;message&#125;</span>&quot;</span></span><br><span class="line">	<span class="variable">$&#123;IfNot&#125;</span> <span class="variable">$&#123;Silent&#125;</span></span><br><span class="line">		<span class="keyword">DetailPrint</span> <span class="string">&quot;<span class="variable">$&#123;message&#125;</span>&quot;</span></span><br><span class="line">		<span class="keyword">MessageBox</span> <span class="params">MB_OK</span> <span class="string">&quot;<span class="variable">$&#123;message&#125;</span>&quot;</span></span><br><span class="line">	<span class="variable">$&#123;EndIf&#125;</span></span><br><span class="line"><span class="keyword">!macro</span>end</span><br></pre></td></tr></table></figure></li>
<li><p>Окон сообщений MessageBox</p>
<figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">MessageBox</span> <span class="params">MB_OK</span> <span class="string">&quot;simple message box&quot;</span></span><br><span class="line"><span class="keyword">MessageBox</span> <span class="params">MB_YESNO</span> <span class="string">&quot;is it true?&quot;</span> <span class="params">IDYES</span> <span class="literal">true</span> <span class="params">IDNO</span> <span class="literal">false</span></span><br><span class="line"><span class="literal">true</span>:</span><br><span class="line">  <span class="keyword">DetailPrint</span> <span class="string">&quot;it&#x27;s true!&quot;</span></span><br><span class="line">  <span class="keyword">Goto</span> next</span><br><span class="line"><span class="literal">false</span>:</span><br><span class="line">  <span class="keyword">DetailPrint</span> <span class="string">&quot;it&#x27;s false&quot;</span></span><br><span class="line">next:</span><br></pre></td></tr></table></figure></li>
<li><p>Отладочных сообщений DetailPrint</p>
<figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DetailPrint</span> <span class="string">&quot;this message will show on the installation window&quot;</span></span><br></pre></td></tr></table></figure></li>
<li><p>Секций Sections</p>
<figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">Section</span> &quot;-hidden section&quot;</span></span><br><span class="line">SectionEnd</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">Section</span> # hidden section</span></span><br><span class="line">SectionEnd</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">Section</span> &quot;!bold section&quot;</span></span><br><span class="line">SectionEnd</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">Section</span> /o &quot;optional&quot;</span></span><br><span class="line">SectionEnd</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">Section</span> &quot;install something&quot; SEC_IDX</span></span><br><span class="line">SectionEnd</span><br><span class="line"></span><br><span class="line"><span class="keyword">InstType</span> <span class="string">&quot;full&quot;</span></span><br><span class="line"><span class="keyword">InstType</span> <span class="string">&quot;minimal&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">Section</span> &quot;a section&quot;</span></span><br><span class="line">    <span class="keyword">SectionIn</span> <span class="number">1</span> <span class="number">2</span></span><br><span class="line">SectionEnd</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">Section</span> &quot;another section&quot;</span></span><br><span class="line">     <span class="keyword">SectionIn</span> <span class="number">1</span></span><br><span class="line">SectionEnd</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">Section</span> &quot;Uninstall&quot;</span></span><br><span class="line">  <span class="keyword">Delete</span> <span class="variable">$INSTDIR</span>\Uninst.exe <span class="comment">; delete self (see explanation below why this works)</span></span><br><span class="line">  <span class="keyword">Delete</span> <span class="variable">$INSTDIR</span>\myApp.exe</span><br><span class="line">  <span class="keyword">RMDir</span> <span class="variable">$INSTDIR</span></span><br><span class="line">  <span class="keyword">DeleteRegKey</span> <span class="params">HKLM</span> SOFTWARE\myApp</span><br><span class="line">SectionEnd</span><br></pre></td></tr></table></figure></li>
<li><p>Плагинов Plug-in DLLs</p>
<figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">SimpleSC::ExistsService</span> <span class="string">&quot;<span class="variable">$paramServiceName</span>&quot;</span></span><br><span class="line"><span class="keyword">Pop</span> <span class="variable">$0</span> <span class="comment">; returns an errorcode if the service doesn?t exists (&lt;&gt;0)/service exists (0)</span></span><br><span class="line"><span class="variable">$&#123;If&#125;</span> <span class="variable">$0</span> == <span class="number">0</span></span><br><span class="line">	<span class="keyword">Call</span> smartRemover</span><br><span class="line">	<span class="keyword">Abort</span></span><br><span class="line"><span class="variable">$&#123;EndIf&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ClearErrors</span></span><br><span class="line"><span class="class">nsJSON::Serialize</span> /format /file <span class="string">&quot;<span class="variable">$INSTDIR</span>\<span class="variable">$&#123;appName&#125;</span>\appsettings.json&quot;</span> <span class="comment">;save to file</span></span><br><span class="line"><span class="variable">$&#123;If&#125;</span> <span class="variable">$&#123;Errors&#125;</span></span><br><span class="line">	<span class="keyword">Call</span> smartRemover</span><br><span class="line">	<span class="keyword">Abort</span></span><br><span class="line"><span class="variable">$&#123;EndIf&#125;</span></span><br></pre></td></tr></table></figure></li>
<li><p>Шаблонов современного пользовательского интерфейса Modern User Interface</p>
<figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Installer pages</span><br><span class="line">MUI_PAGE_WELCOME</span><br><span class="line">MUI_PAGE_LICENSE textfile</span><br><span class="line">MUI_PAGE_COMPONENTS</span><br><span class="line">MUI_PAGE_DIRECTORY</span><br><span class="line">MUI_PAGE_STARTMENU pageid variable</span><br><span class="line">MUI_PAGE_INSTFILES</span><br><span class="line">MUI_PAGE_FINISH</span><br><span class="line"></span><br><span class="line">Uninstaller pages</span><br><span class="line">MUI_UNPAGE_WELCOME</span><br><span class="line">MUI_UNPAGE_CONFIRM</span><br><span class="line">MUI_UNPAGE_LICENSE textfile</span><br><span class="line">MUI_UNPAGE_COMPONENTS</span><br><span class="line">MUI_UNPAGE_DIRECTORY</span><br><span class="line">MUI_UNPAGE_INSTFILES</span><br><span class="line">MUI_UNPAGE_FINISH</span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ostart.github.io/2021/07/18/nsis-scripting/" data-id="cl206b7gu00108ovs9gk2gzo8" data-title="Введение в синтаксис NSIS скриптов" class="article-share-link">Поделиться</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NSIS/" rel="tag">NSIS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nsis/" rel="tag">nsis</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/script/" rel="tag">script</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scripting/" rel="tag">scripting</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-nsis-intro" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/07/17/nsis-intro/" class="article-date">
  <time class="dt-published" datetime="2021-07-17T10:41:09.000Z" itemprop="datePublished">17-07-2021</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/07/17/nsis-intro/">О NSIS</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Если вам однажды потребуется изготовить установщик для Windows, то обратите внимание на <a target="_blank" rel="noopener" href="https://nsis.sourceforge.io/">NSIS (Nullsoft Scriptable Install System)</a>. NSIS - это профессиональная система с открытым исходным кодом, компактная и гибкая. У неё есть свои минусы (низкоуровневый синтаксис языка скриптов NSIS, включающий работу с регистрами, макросы и т.п.), но плюсы, как правило, их перевешивают. </p>
<h3 id="К-основным-плюсам-можно-отнести"><a href="#К-основным-плюсам-можно-отнести" class="headerlink" title="К основным плюсам можно отнести:"></a>К основным плюсам можно отнести:</h3><ul>
<li>сверх компактный размер (оверхэд самого NSIS всего 34 KB)</li>
<li>совместимость с основными версиями ОС: Windows 95, Windows 98, Windows ME, Windows NT, Windows 2000, Windows XP, Windows Server 2003, Windows Vista, Windows Sever 2008, Windows 7, Windows Server 2008R2, Windows 8, Windows Server 2012, Windows 8.1, Windows Server 2012R2, Windows Server 2016 и Windows 10</li>
<li>большое количество плагинов, позволяющих реализовать почти все задумки</li>
<li>безоплатность</li>
<li>стабильность</li>
<li>многоязычность (в одном установщике до 60-ти языков)</li>
<li>создание пользовательских диалоговых окон</li>
<li>создание собственных плагинов (C, C++, Delphi)</li>
</ul>
<p>Плагины включают в себя взаимодействие с БД, реестром, папками и файлами, переменными окружения, Windows службами, IIS, командной строкой, Powershell, Win32 API вызовы, перезагрузку системы, интернет соединения, создание ярлыков, деинсталляторов и многое многое другое.</p>
<p>Взаимодействие с NSIS основано на скриптах (на собственном языке программирования, базовый синтаксис которого описан в <a href="">посте</a>), которые собираются в Windows установщик. NSIS до сих пор поддерживается (последний релиз NSIS 3.06.1 от 31 июля 2020), имеет большое сообщество и массу туториалов.</p>
<h3 id="Структура-скрипта"><a href="#Структура-скрипта" class="headerlink" title="Структура скрипта:"></a>Структура скрипта:</h3><ul>
<li>Атрибуты установщика (Константы: WINDIR, SYSDIR, INSTDIR, PROGRAMFILES … Атрибуты: BrandingText, Caption, Icon …)</li>
<li>Страницы (лицензия, компоненты, выбор директории, подтверждение деинсталляции …)</li>
<li>Секции (установка, деинсталляция …)</li>
<li>Функции (.onInit, un.onInit, .onGUIInit, .onInstSuccess, .onInstFailed, .onMouseOverSection …)</li>
</ul>
<p>Подробнее с синтаксисом NSIS можно ознакомиться тут: <a href="https://ostart.github.io/2021/07/18/nsis-scripting/">Введение в синтаксис NSIS скриптов</a></p>
<p>Пример простого NSIS скрипта:</p>
<figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">!include</span> <span class="string">&quot;MUI2.nsh&quot;</span></span><br><span class="line"><span class="keyword">!include</span> LogicLib.nsh</span><br><span class="line"></span><br><span class="line"><span class="keyword">Name</span> <span class="string">&quot;SectionTest&quot;</span></span><br><span class="line"><span class="keyword">OutFile</span> <span class="string">&quot;SectionTest.exe&quot;</span></span><br><span class="line"><span class="keyword">ShowInstDetails</span> <span class="literal">show</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">!insertmacro</span> MUI_PAGE_COMPONENTS</span><br><span class="line"><span class="keyword">!insertmacro</span> MUI_PAGE_INSTFILES</span><br><span class="line"><span class="keyword">!insertmacro</span> MUI_LANGUAGE <span class="string">&quot;English&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">Section</span> &quot;One&quot; SecOne  </span></span><br><span class="line">SectionEnd</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">Section</span> &quot;Two&quot; SecTwo  </span></span><br><span class="line">SectionEnd</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">Section</span> &quot;-OneTwo&quot;</span></span><br><span class="line">        <span class="variable">$&#123;If&#125;</span> <span class="variable">$&#123;SectionIsSelected&#125;</span> <span class="variable">$&#123;SecOne&#125;</span></span><br><span class="line">                <span class="keyword">DetailPrint</span> <span class="string">&quot;Section one&quot;</span></span><br><span class="line">                <span class="variable">$&#123;If&#125;</span> <span class="variable">$&#123;SectionIsSelected&#125;</span> <span class="variable">$&#123;SecTwo&#125;</span></span><br><span class="line">                        <span class="keyword">DetailPrint</span> <span class="string">&quot;Section two is selected&quot;</span></span><br><span class="line">                <span class="variable">$&#123;EndIf&#125;</span></span><br><span class="line">        <span class="variable">$&#123;EndIf&#125;</span></span><br><span class="line">        </span><br><span class="line">        <span class="variable">$&#123;If&#125;</span> <span class="variable">$&#123;SectionIsSelected&#125;</span> <span class="variable">$&#123;SecTwo&#125;</span></span><br><span class="line">                <span class="keyword">DetailPrint</span> <span class="string">&quot;Section two&quot;</span></span><br><span class="line">        <span class="variable">$&#123;EndIf&#125;</span></span><br><span class="line">SectionEnd</span><br></pre></td></tr></table></figure>

<p>Для работы со скриптами рекомендую пользоваться программой <a target="_blank" rel="noopener" href="https://nsis.sourceforge.io/Venis_IX">Venis IX</a>. Работа с программой описана тут: <a href="https://ostart.github.io/2021/07/23/venis-IX/">Работа с NSIS скриптами в Venis_IX</a>.</p>
<p>В конце хотел бы привести несколько типичных изображений работы установщика NSIS с которым каждый пользователь Windows хоть раз, да сталкивался:</p>
<img src="/2021/07/17/nsis-intro/nsis-intro1.png" class="" title="NSIS Intro">
<p>&nbsp;</p>
<img src="/2021/07/17/nsis-intro/nsis-intro2.png" class="" title="NSIS Intro">

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ostart.github.io/2021/07/17/nsis-intro/" data-id="cl206b7gt000y8ovs24xp5nyl" data-title="О NSIS" class="article-share-link">Поделиться</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NSIS/" rel="tag">NSIS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nsis/" rel="tag">nsis</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-snmpsim-docker" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/29/snmpsim-docker/" class="article-date">
  <time class="dt-published" datetime="2021-06-29T10:11:12.000Z" itemprop="datePublished">29-06-2021</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/06/29/snmpsim-docker/">SnmpSim. Запускаем в Docker</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>В предыдущем посте была рассмотрен <a href="https://ostart.github.io/2021/06/22/snmpsim/">запуск симулятора snmpsim в Windows</a>. Здесь же рассмотрим особенности запуска этого симулятора в Docker.</p>
<p>Для запуска snmpsim в докере мы будем использовать образ python:3.7-slim-buster. Почему не Alpine можно узнать из <a target="_blank" rel="noopener" href="https://habr.com/ru/post/486202/">статьи на Хабре</a>. В целом алгоритм достаточно прост: установить из <strong>pip</strong> симулятор <em>snmpsim</em>, скопировать папку <strong>data</strong> (содержащую файл <em>public.snmprec</em>) и открыть <strong>161</strong> порт. </p>
<p>И тут <strong>самое важное</strong>: требуется стартовать <strong>snmpsimd.py</strong> непременно из под <em>process-user</em> и <em>process-group</em> равными <strong>root</strong>.</p>
<p>Ниже подробный Dockerfile:</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> python:<span class="number">3.7</span>-slim-buster</span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> pip install --no-cache-dir snmpsim</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> data /usr/<span class="built_in">local</span>/snmpsim/data</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">161</span>/udp</span><br><span class="line"></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">&quot;snmpsimd.py&quot;</span>, <span class="string">&quot;--agent-udpv4-endpoint=0.0.0.0:161&quot;</span>, <span class="string">&quot;--process-user=root&quot;</span>, <span class="string">&quot;--process-group=root&quot;</span>]</span></span><br></pre></td></tr></table></figure>
<p>Файл <strong>public.snmprec</strong> из вышеупомянутой папки <em>data</em> подробно описан в <a href="https://ostart.github.io/2021/06/22/snmpsim/">предыдущем посте по snmpsim в Windows</a>.</p>
<p>Собственно остаётся перейдти в папку с Dockerfile и выполнить команды:</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build . -t snmp-sim</span><br></pre></td></tr></table></figure>
<p>и</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p <span class="number">161</span>:<span class="number">161</span> snmp-sim</span><br></pre></td></tr></table></figure>

<p>Проверить обмен с симулятором можно с помощью программы <a target="_blank" rel="noopener" href="https://www.ireasoning.com/mibbrowser.shtml">MIB Browser</a></p>
<img src="/2021/06/29/snmpsim-docker/mib-browser.jpg" class="" title="MIB Browser">
      
    </div>
    <footer class="article-footer">
      <a data-url="https://ostart.github.io/2021/06/29/snmpsim-docker/" data-id="cl206b7ha001q8ovsbhvo2tcb" data-title="SnmpSim. Запускаем в Docker" class="article-share-link">Поделиться</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/printer/" rel="tag">printer</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/simulator/" rel="tag">simulator</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/snmp/" rel="tag">snmp</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/snmpsim/" rel="tag">snmpsim</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%D0%B4%D0%BE%D0%BA%D0%B5%D1%80/" rel="tag">докер</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%D0%BF%D1%80%D0%B8%D0%BD%D1%82%D0%B5%D1%80/" rel="tag">принтер</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%D1%81%D0%B8%D0%BC%D1%83%D0%BB%D1%8F%D1%82%D0%BE%D1%80/" rel="tag">симулятор</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-snmpsim" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/22/snmpsim/" class="article-date">
  <time class="dt-published" datetime="2021-06-22T04:11:57.000Z" itemprop="datePublished">22-06-2021</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/06/22/snmpsim/">SnmpSim. Запускаем в Windows</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Как сообщает Википедия, <a target="_blank" rel="noopener" href="https://ru.wikipedia.org/wiki/SNMP">SNMP</a> (англ. Simple Network Management Protocol — простой протокол сетевого управления) — стандартный интернет-протокол для управления устройствами в IP-сетях на основе архитектур TCP/UDP. К поддерживающим SNMP устройствам относятся маршрутизаторы, коммутаторы, серверы, рабочие станции, принтеры, модемные стойки и другие. Протокол обычно используется в системах сетевого управления для контроля подключённых к сети устройств на предмет условий, которые требуют внимания администратора.</p>
<p>Касательно принтеров возможен опрос их характеристик по SNMP-протоколу, например: количество отпечатанных листов разных форматов, количество оставшегося ресурса фотобарабана и т.д.<br>Иногда требуется симулировать ответы устройства по SNMP для целей тестирования, в том числе нагрузочного.</p>
<p>В вопросе симуляции ответов SNMP устройств отличным помощником выступает <a target="_blank" rel="noopener" href="https://github.com/etingof/snmpsim">SNMP Simulator</a>, который сам себя характеризует как pure-Python, open source and free implementation of SNMP agents simulator. Исходные коды симулятора расположены на Github по адресу: <a target="_blank" rel="noopener" href="https://github.com/etingof/snmpsim">https://github.com/etingof/snmpsim</a></p>
<p>Для функционирования симулятора потребуется Python любой версии из ряда: 2.4, 2.5, 2.6, 2.7, 3.2, 3.3, 3.4, 3.5, 3.6, 3.7. Скачать его можно отсюда: <a target="_blank" rel="noopener" href="https://www.python.org/downloads/">https://www.python.org/downloads/</a></p>
<p>Для установки симулятора введите команду в терминале (PowerShell, CommandPrompt):</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> pip install snmpsim</span><br></pre></td></tr></table></figure>

<p>Далее для симуляции потребуется текстовый файл public.snmprec, содержащий в каждой отдельной строке:</p>
<p>OID|тип_значения|значение</p>
<p>Например:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.3.6.1.2.1.1.1.0|4|Linux 2.6.25.5-smp SMP Tue Jun 19 14:58:11 CDT 2007 i686</span><br><span class="line">1.3.6.1.2.1.1.2.0|6|1.3.6.1.4.1.8072.3.2.10</span><br><span class="line">1.3.6.1.2.1.1.3.0|67|233425120</span><br><span class="line">1.3.6.1.2.1.2.2.1.6.2|4x|00127962f940</span><br><span class="line">1.3.6.1.2.1.4.22.1.3.2.192.21.54.7|64x|c3dafe61</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>Для симуляции ответов принтера используйте <strong>тип_значения</strong> равным <strong>4</strong>, что означает <strong>OctetString</strong>.</p>
<p>Я использовал, в частности, файл public.snmprec такого вида:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.3.6.1.2.1.43.5.1.1.17.1|4|A7980275412</span><br><span class="line">1.3.6.1.2.1.25.3.2.1.3.1|4|KONICA MINOLTA bizhub C227</span><br><span class="line">1.3.6.1.4.1.18334.1.1.1.5.7.2.3.1.5.1|4|735</span><br><span class="line">1.3.6.1.4.1.18334.1.1.1.5.7.2.2.1.5.2.1|4|190</span><br><span class="line">1.3.6.1.4.1.18334.1.1.1.5.7.2.2.1.5.1.1|4|5</span><br></pre></td></tr></table></figure>

<p>При запуске симулятор будет искать файл, симулирующий ответы public.snmprec, по нескольким путям, но я рекомендую разместить public.snmprec в папке: </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\&#123;userName&#125;\SNMP Simulator\Data</span><br></pre></td></tr></table></figure>

<p>Запустить симулятор можно из терминала командой:</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">snmpsimd.py --data-<span class="built_in">dir</span>=./data --agent-udpv4-endpoint=<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span>:<span class="number">161</span></span><br></pre></td></tr></table></figure>

<p>Симулятор будет слушать 161 порт и отвечать на входящие OID значением из файла public.snmprec, если оно там присутствует.</p>
<p>Проверить обмен с симулятором можно с помощью программы <a target="_blank" rel="noopener" href="https://www.ireasoning.com/mibbrowser.shtml">MIB Browser</a></p>
<img src="/2021/06/22/snmpsim/mib-browser.jpg" class="" title="MIB Browser">

<p>Ну вот и всё! Спасибо <a href="mailto:etingof@gmail.com">Ilya Etingof</a> за зачётный симулятор!</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ostart.github.io/2021/06/22/snmpsim/" data-id="cl206b7hb001r8ovs1gnchma9" data-title="SnmpSim. Запускаем в Windows" class="article-share-link">Поделиться</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/printer/" rel="tag">printer</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/simulator/" rel="tag">simulator</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/snmp/" rel="tag">snmp</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/snmpsim/" rel="tag">snmpsim</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%D0%BF%D1%80%D0%B8%D0%BD%D1%82%D0%B5%D1%80/" rel="tag">принтер</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%D1%81%D0%B8%D0%BC%D1%83%D0%BB%D1%8F%D1%82%D0%BE%D1%80/" rel="tag">симулятор</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/3/">&laquo; Назад</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/5/">Вперед &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Метки</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Benchmark/" rel="tag">Benchmark</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BenchmarkDotNet/" rel="tag">BenchmarkDotNet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C#</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Calendar/" rel="tag">Calendar</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ClearScript/" rel="tag">ClearScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DateTime/" rel="tag">DateTime</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DefaultRequestHeaders/" rel="tag">DefaultRequestHeaders</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/EPPlus/" rel="tag">EPPlus</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/EntityFramework/" rel="tag">EntityFramework</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Enum/" rel="tag">Enum</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Excel/" rel="tag">Excel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GetWeekOfYear/" rel="tag">GetWeekOfYear</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Guid/" rel="tag">Guid</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Headers/" rel="tag">Headers</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HttpClient/" rel="tag">HttpClient</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ILSpy/" rel="tag">ILSpy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ISOWeek/" rel="tag">ISOWeek</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JS/" rel="tag">JS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LEFTJOIN/" rel="tag">LEFTJOIN</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LINQ/" rel="tag">LINQ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NSIS/" rel="tag">NSIS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NuGet/" rel="tag">NuGet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OWIN/" rel="tag">OWIN</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OrderBy/" rel="tag">OrderBy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ProgressiveDelayPattern/" rel="tag">ProgressiveDelayPattern</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RPM/" rel="tag">RPM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SNMP/" rel="tag">SNMP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SPEC/" rel="tag">SPEC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SelectMany/" rel="tag">SelectMany</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Stopwatch/" rel="tag">Stopwatch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Swagger/" rel="tag">Swagger</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ToDictionary/" rel="tag">ToDictionary</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ToLookup/" rel="tag">ToLookup</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TopShelf/" rel="tag">TopShelf</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VSCode/" rel="tag">VSCode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Venis-IX/" rel="tag">Venis_IX</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebAPI/" rel="tag">WebAPI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Windows-service/" rel="tag">Windows-service</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bash/" rel="tag">bash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/concurrency/" rel="tag">concurrency</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cursor/" rel="tag">cursor</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/get-request/" rel="tag">get-request</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/get-response/" rel="tag">get-response</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/" rel="tag">github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/githubpages/" rel="tag">githubpages</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/net5-0/" rel="tag">net5.0</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nsis/" rel="tag">nsis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/paging/" rel="tag">paging</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pragmatic-programmer/" rel="tag">pragmatic-programmer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/printer/" rel="tag">printer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/script/" rel="tag">script</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/scripting/" rel="tag">scripting</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/server/" rel="tag">server</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/simulator/" rel="tag">simulator</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/snmp/" rel="tag">snmp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/snmpsim/" rel="tag">snmpsim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/switch/" rel="tag">switch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/thread-safe/" rel="tag">thread-safe</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%D0%A2%D0%BE%D0%BC%D0%B0%D1%81/" rel="tag">Томас</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%D0%A5%D0%B0%D0%BD%D1%82/" rel="tag">Хант</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%D0%B1%D0%BB%D0%BE%D0%B3/" rel="tag">блог</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%D0%B4%D0%BE%D0%BA%D0%B5%D1%80/" rel="tag">докер</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%D0%BF%D1%80%D0%B8%D0%BD%D1%82%D0%B5%D1%80/" rel="tag">принтер</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%81%D1%82-%D0%BF%D1%80%D0%B0%D0%B3%D0%BC%D0%B0%D1%82%D0%B8%D0%BA/" rel="tag">программист-прагматик</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%D1%81%D0%B8%D0%BC%D1%83%D0%BB%D1%8F%D1%82%D0%BE%D1%80/" rel="tag">симулятор</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5%D0%B1%D0%BB%D0%BE%D0%B3%D0%B0/" rel="tag">созданиеблога</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Облако меток</h3>
    <div class="widget tagcloud">
      <a href="/tags/Benchmark/" style="font-size: 10px;">Benchmark</a> <a href="/tags/BenchmarkDotNet/" style="font-size: 10px;">BenchmarkDotNet</a> <a href="/tags/C/" style="font-size: 20px;">C#</a> <a href="/tags/Calendar/" style="font-size: 10px;">Calendar</a> <a href="/tags/ClearScript/" style="font-size: 12.5px;">ClearScript</a> <a href="/tags/DateTime/" style="font-size: 10px;">DateTime</a> <a href="/tags/DefaultRequestHeaders/" style="font-size: 10px;">DefaultRequestHeaders</a> <a href="/tags/EPPlus/" style="font-size: 10px;">EPPlus</a> <a href="/tags/EntityFramework/" style="font-size: 10px;">EntityFramework</a> <a href="/tags/Enum/" style="font-size: 10px;">Enum</a> <a href="/tags/Excel/" style="font-size: 10px;">Excel</a> <a href="/tags/GetWeekOfYear/" style="font-size: 10px;">GetWeekOfYear</a> <a href="/tags/Guid/" style="font-size: 10px;">Guid</a> <a href="/tags/Headers/" style="font-size: 10px;">Headers</a> <a href="/tags/HttpClient/" style="font-size: 10px;">HttpClient</a> <a href="/tags/ILSpy/" style="font-size: 10px;">ILSpy</a> <a href="/tags/ISOWeek/" style="font-size: 10px;">ISOWeek</a> <a href="/tags/JS/" style="font-size: 12.5px;">JS</a> <a href="/tags/JavaScript/" style="font-size: 12.5px;">JavaScript</a> <a href="/tags/LEFTJOIN/" style="font-size: 10px;">LEFTJOIN</a> <a href="/tags/LINQ/" style="font-size: 17.5px;">LINQ</a> <a href="/tags/Linux/" style="font-size: 12.5px;">Linux</a> <a href="/tags/NSIS/" style="font-size: 15px;">NSIS</a> <a href="/tags/NuGet/" style="font-size: 10px;">NuGet</a> <a href="/tags/OWIN/" style="font-size: 10px;">OWIN</a> <a href="/tags/OrderBy/" style="font-size: 10px;">OrderBy</a> <a href="/tags/ProgressiveDelayPattern/" style="font-size: 10px;">ProgressiveDelayPattern</a> <a href="/tags/RPM/" style="font-size: 12.5px;">RPM</a> <a href="/tags/SNMP/" style="font-size: 15px;">SNMP</a> <a href="/tags/SPEC/" style="font-size: 10px;">SPEC</a> <a href="/tags/SelectMany/" style="font-size: 10px;">SelectMany</a> <a href="/tags/Stopwatch/" style="font-size: 10px;">Stopwatch</a> <a href="/tags/Swagger/" style="font-size: 10px;">Swagger</a> <a href="/tags/ToDictionary/" style="font-size: 10px;">ToDictionary</a> <a href="/tags/ToLookup/" style="font-size: 10px;">ToLookup</a> <a href="/tags/TopShelf/" style="font-size: 10px;">TopShelf</a> <a href="/tags/VSCode/" style="font-size: 10px;">VSCode</a> <a href="/tags/Venis-IX/" style="font-size: 10px;">Venis_IX</a> <a href="/tags/WebAPI/" style="font-size: 10px;">WebAPI</a> <a href="/tags/Windows-service/" style="font-size: 12.5px;">Windows-service</a> <a href="/tags/bash/" style="font-size: 12.5px;">bash</a> <a href="/tags/concurrency/" style="font-size: 10px;">concurrency</a> <a href="/tags/cursor/" style="font-size: 10px;">cursor</a> <a href="/tags/docker/" style="font-size: 10px;">docker</a> <a href="/tags/get-request/" style="font-size: 10px;">get-request</a> <a href="/tags/get-response/" style="font-size: 10px;">get-response</a> <a href="/tags/github/" style="font-size: 10px;">github</a> <a href="/tags/githubpages/" style="font-size: 10px;">githubpages</a> <a href="/tags/net5-0/" style="font-size: 10px;">net5.0</a> <a href="/tags/nsis/" style="font-size: 15px;">nsis</a> <a href="/tags/paging/" style="font-size: 10px;">paging</a> <a href="/tags/pragmatic-programmer/" style="font-size: 10px;">pragmatic-programmer</a> <a href="/tags/printer/" style="font-size: 12.5px;">printer</a> <a href="/tags/script/" style="font-size: 12.5px;">script</a> <a href="/tags/scripting/" style="font-size: 10px;">scripting</a> <a href="/tags/server/" style="font-size: 10px;">server</a> <a href="/tags/simulator/" style="font-size: 12.5px;">simulator</a> <a href="/tags/snmp/" style="font-size: 12.5px;">snmp</a> <a href="/tags/snmpsim/" style="font-size: 12.5px;">snmpsim</a> <a href="/tags/switch/" style="font-size: 10px;">switch</a> <a href="/tags/thread-safe/" style="font-size: 10px;">thread-safe</a> <a href="/tags/%D0%A2%D0%BE%D0%BC%D0%B0%D1%81/" style="font-size: 10px;">Томас</a> <a href="/tags/%D0%A5%D0%B0%D0%BD%D1%82/" style="font-size: 10px;">Хант</a> <a href="/tags/%D0%B1%D0%BB%D0%BE%D0%B3/" style="font-size: 10px;">блог</a> <a href="/tags/%D0%B4%D0%BE%D0%BA%D0%B5%D1%80/" style="font-size: 10px;">докер</a> <a href="/tags/%D0%BF%D1%80%D0%B8%D0%BD%D1%82%D0%B5%D1%80/" style="font-size: 12.5px;">принтер</a> <a href="/tags/%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%81%D1%82-%D0%BF%D1%80%D0%B0%D0%B3%D0%BC%D0%B0%D1%82%D0%B8%D0%BA/" style="font-size: 10px;">программист-прагматик</a> <a href="/tags/%D1%81%D0%B8%D0%BC%D1%83%D0%BB%D1%8F%D1%82%D0%BE%D1%80/" style="font-size: 12.5px;">симулятор</a> <a href="/tags/%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5%D0%B1%D0%BB%D0%BE%D0%B3%D0%B0/" style="font-size: 10px;">созданиеблога</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Архив</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">апрель 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">март 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">февраль 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">декабрь 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">ноябрь 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">октябрь 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">сентябрь 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">август 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">июль 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">июнь 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Недавние записи</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/04/15/to-dictionary-vs-to-lookup/">ToDictionary vs ToLookup</a>
          </li>
        
          <li>
            <a href="/2022/03/31/sorting-tuples/">Сортировка кортежей</a>
          </li>
        
          <li>
            <a href="/2022/03/31/order-by/">LINQ оператор OrderBy</a>
          </li>
        
          <li>
            <a href="/2022/03/22/select-many/">LINQ оператор SelectMany</a>
          </li>
        
          <li>
            <a href="/2022/03/17/int-to-guid/">Как преобразовать int в Guid заданным способом</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 Artem Ostashchenko<br>
      Создано с помощью <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a target="_blank" rel="noopener" href="https://github.com/ostart/Skills" class="mobile-nav-link">My Skills</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>